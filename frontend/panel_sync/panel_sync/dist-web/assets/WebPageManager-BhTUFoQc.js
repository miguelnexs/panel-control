import{c as P,r as i,g as de,j as e,X as Me,R as ve,b as Ne,P as Re,G as J,a as xe,C as X,T as me,S as ue}from"./index-B0-dYYhW.js";import{a as M,P as ee,E as De,T as ge}from"./TemplatesManager-DflMNpiQ.js";import{S as we}from"./smartphone-DXaUyE_3.js";import{S as Ie}from"./save-DaQs6UXF.js";import{P as Ce}from"./palette-Ce57apDO.js";import{I as he}from"./image-CpV40QnQ.js";import{S as W}from"./shopping-cart-7z_LuD9O.js";import{C as be}from"./check-L4g8Rsdc.js";import{S as Z}from"./shopping-bag-DP9oZeIa.js";import{L as pe}from"./layers-Cz3Cg7vt.js";import{E as Ue}from"./eye-BOztA-m_.js";import"./vendor-BtP0CW_r.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],fe=P("bot",Oe);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],B=P("chevron-down",qe);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],q=P("chevron-right",He);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Fe=P("eye-off",Ve);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ke=P("monitor",Ge);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],ye=P("rocket",We);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ke=P("send",Je);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Se=P("sparkles",Qe);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],je=P("store",Ye),Xe=({token:u,siteUrl:h,apiBase:b,templateId:C,onClose:w})=>{const[r,T]=i.useState(null),[$,R]=i.useState([]),[_,l]=i.useState(!0),[y,z]=i.useState(!1),[j,E]=i.useState("general"),[S,A]=i.useState("desktop"),[a,c]=i.useState(0),[n,g]=i.useState(null),d=de.useRef(null),k=de.useRef(null);i.useEffect(()=>{D();const t=p=>{var m;if(((m=p.data)==null?void 0:m.type)==="CONTENT_CHANGED"){const v=p.data.payload;T(f=>f&&{...f,page_content:{...f.page_content,...v}})}};return window.addEventListener("message",t),()=>window.removeEventListener("message",t)},[]),i.useEffect(()=>{var t;r!=null&&r.page_content&&((t=k.current)!=null&&t.contentWindow)&&k.current.contentWindow.postMessage({type:"INITIAL_CONTENT",payload:r.page_content},"*")},[r]);const D=async()=>{try{const t={Authorization:`Bearer ${u}`},[p,m]=await Promise.all([M.get(`${b}/webconfig/settings/`,{headers:t}),M.get(`${b}/webconfig/banners/`,{headers:t})]);let v=p.data;if(C)try{const f=await M.get(`${b}/webconfig/templates/${C}/`,{headers:t});f.data&&f.data.page_content&&(v={...v,page_content:f.data.page_content},g(f.data.page_content))}catch(f){console.error("Error loading template content:",f)}T(v),R(m.data.results||[])}catch(t){console.error("Error loading editor data:",t)}finally{l(!1)}},F=async t=>{if(!t.target.files||!t.target.files[0])return;const p=t.target.files[0],m=new FormData;m.append("image",p),m.append("title",p.name.split(".")[0]),m.append("active","true"),m.append("position","0");try{z(!0);const v={Authorization:`Bearer ${u}`,"Content-Type":"multipart/form-data"};await M.post(`${b}/webconfig/banners/`,m,{headers:v}),c(Q=>Q+1);const f=await M.get(`${b}/webconfig/banners/`,{headers:{Authorization:`Bearer ${u}`}});R(f.data.results||[])}catch(v){console.error("Error uploading banner:",v)}finally{z(!1),d.current&&(d.current.value="")}},U=async t=>{if(confirm("¿Eliminar banner?"))try{const p={Authorization:`Bearer ${u}`};await M.delete(`${b}/webconfig/banners/${t}/`,{headers:p}),R(m=>m.filter(v=>v.id!==t)),c(m=>m+1)}catch(p){console.error("Error deleting banner:",p)}},G=async()=>{if(r){z(!0);try{const t={Authorization:`Bearer ${u}`},p={...r};if(C&&delete p.page_content,await M.put(`${b}/webconfig/settings/`,p,{headers:t}),C){const m=JSON.stringify(r.page_content||{}),v=JSON.stringify(n||{});if(m!==v)try{await M.patch(`${b}/webconfig/templates/${C}/`,{page_content:r.page_content},{headers:t}),console.log("Template draft saved"),g(r.page_content||{})}catch(f){console.error("Error saving template draft:",f)}else console.log("No content changes to save for template draft")}c(m=>m+1)}catch(t){console.error("Error saving:",t)}finally{z(!1)}}},x=(t,p)=>{r&&T({...r,[t]:p})},H=(t=>t?t.startsWith("http")?t:t.includes("localhost")||t.includes("127.0.0.1")?`http://${t}`:`https://${t}`:"")(h);return _?e.jsx("div",{className:"fixed inset-0 bg-gray-950 flex items-center justify-center z-50",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-400",children:"Cargando editor..."})]})}):e.jsxs("div",{className:"fixed inset-0 bg-gray-950 z-50 flex flex-col animate-in fade-in duration-300",children:[e.jsxs("div",{className:"h-16 bg-gray-900 border-b border-gray-800 flex items-center justify-between px-4 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:w,className:"p-2 hover:bg-gray-800 rounded-lg text-gray-400 hover:text-white transition-colors",children:e.jsx(Me,{size:20})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-white font-medium text-sm",children:"Editor del Sitio"}),e.jsx("span",{className:"text-xs text-gray-500",children:h})]})]}),e.jsxs("div",{className:"flex items-center bg-gray-800 rounded-lg p-1 border border-gray-700",children:[e.jsx("button",{onClick:()=>A("desktop"),className:`p-2 rounded-md transition-all ${S==="desktop"?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:e.jsx(ke,{size:18})}),e.jsx("button",{onClick:()=>A("mobile"),className:`p-2 rounded-md transition-all ${S==="mobile"?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:e.jsx(we,{size:18})})]}),e.jsxs("button",{onClick:G,disabled:y,className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg text-sm font-medium transition-colors shadow-lg shadow-blue-900/20 flex items-center gap-2 disabled:opacity-50",children:[y?e.jsx(ve,{size:16,className:"animate-spin"}):e.jsx(Ie,{size:16}),e.jsx("span",{children:"Guardar"})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-80 bg-gray-900 border-r border-gray-800 flex flex-col overflow-y-auto",children:[e.jsxs("div",{className:"border-b border-gray-800",children:[e.jsxs("button",{onClick:()=>E(j==="general"?null:"general"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 text-white font-medium text-sm",children:[e.jsx(ee,{size:18,className:"text-blue-400"}),e.jsx("span",{children:"Información General"})]}),j==="general"?e.jsx(B,{size:16,className:"text-gray-500"}):e.jsx(q,{size:16,className:"text-gray-500"})]}),j==="general"&&r&&e.jsxs("div",{className:"p-4 space-y-4 bg-gray-900/50 animate-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Nombre del Negocio"}),e.jsx("input",{type:"text",value:r.company_name,onChange:t=>x("company_name",t.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:ring-2 focus:ring-blue-500/50 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Descripción"}),e.jsx("textarea",{value:r.company_description,onChange:t=>x("company_description",t.target.value),rows:3,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:ring-2 focus:ring-blue-500/50 focus:outline-none resize-none"})]})]})]}),e.jsxs("div",{className:"border-b border-gray-800",children:[e.jsxs("button",{onClick:()=>E(j==="colors"?null:"colors"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 text-white font-medium text-sm",children:[e.jsx(Ce,{size:18,className:"text-emerald-400"}),e.jsx("span",{children:"Colores y Estilo"})]}),j==="colors"?e.jsx(B,{size:16,className:"text-gray-500"}):e.jsx(q,{size:16,className:"text-gray-500"})]}),j==="colors"&&r&&e.jsxs("div",{className:"p-4 space-y-4 bg-gray-900/50 animate-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Color Principal"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:r.primary_color,onChange:t=>x("primary_color",t.target.value),className:"h-9 w-9 rounded-lg bg-transparent border border-gray-700 cursor-pointer"}),e.jsx("input",{type:"text",value:r.primary_color,onChange:t=>x("primary_color",t.target.value),className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:ring-2 focus:ring-blue-500/50 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Color Secundario"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:r.secondary_color,onChange:t=>x("secondary_color",t.target.value),className:"h-9 w-9 rounded-lg bg-transparent border border-gray-700 cursor-pointer"}),e.jsx("input",{type:"text",value:r.secondary_color,onChange:t=>x("secondary_color",t.target.value),className:"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:ring-2 focus:ring-blue-500/50 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1.5",children:"Fuente"}),e.jsxs("select",{value:r.font_family,onChange:t=>x("font_family",t.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:ring-2 focus:ring-blue-500/50 focus:outline-none",children:[e.jsx("option",{value:"Inter",children:"Inter"}),e.jsx("option",{value:"Roboto",children:"Roboto"}),e.jsx("option",{value:"Poppins",children:"Poppins"}),e.jsx("option",{value:"Lato",children:"Lato"})]})]})]})]}),e.jsxs("div",{className:"border-b border-gray-800",children:[e.jsxs("button",{onClick:()=>E(j==="banners"?null:"banners"),className:"w-full flex items-center justify-between p-4 hover:bg-gray-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 text-white font-medium text-sm",children:[e.jsx(he,{size:18,className:"text-amber-400"}),e.jsx("span",{children:"Banners"})]}),j==="banners"?e.jsx(B,{size:16,className:"text-gray-500"}):e.jsx(q,{size:16,className:"text-gray-500"})]}),j==="banners"&&e.jsxs("div",{className:"p-4 space-y-4 bg-gray-900/50 animate-in slide-in-from-top-2 duration-200",children:[$.map(t=>e.jsx("div",{className:"bg-gray-800 rounded-lg p-3 border border-gray-700 group relative",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-md overflow-hidden",children:t.image?e.jsx("img",{src:t.image,alt:"",className:"w-full h-full object-cover"}):e.jsx(he,{className:"w-5 h-5 m-auto mt-2.5 text-gray-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:t.title||"Sin título"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.active?"Activo":"Inactivo"})]}),e.jsx("button",{onClick:()=>U(t.id),className:"p-1.5 rounded-md hover:bg-gray-700 text-gray-400 hover:text-rose-400 transition-colors",children:e.jsx(Ne,{size:14})})]})},t.id)),e.jsx("input",{type:"file",ref:d,className:"hidden",accept:"image/*",onChange:F}),e.jsxs("button",{onClick:()=>{var t;return(t=d.current)==null?void 0:t.click()},className:"w-full py-2 border border-dashed border-gray-700 rounded-lg text-sm text-gray-400 hover:text-white hover:border-gray-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Re,{size:16}),e.jsx("span",{children:"Agregar Banner"})]})]})]})]}),e.jsx("div",{className:"flex-1 bg-gray-950 flex items-center justify-center relative p-8",children:e.jsx("div",{className:`transition-all duration-500 ease-in-out bg-white shadow-2xl overflow-hidden ${S==="mobile"?"w-[375px] h-[667px] rounded-[2rem] border-[8px] border-gray-800":"w-full h-full rounded-xl border border-gray-800"}`,children:H?e.jsx("iframe",{ref:k,src:H,className:"w-full h-full border-none",title:"Site Preview",onLoad:()=>{var t;(t=k.current)!=null&&t.contentWindow&&r!=null&&r.page_content&&k.current.contentWindow.postMessage({type:"INITIAL_CONTENT",payload:r.page_content},"*")}},a):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-500 bg-gray-50",children:[e.jsx(J,{size:48,className:"mb-4 opacity-20"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No hay URL configurada"}),e.jsx("p",{className:"text-sm",children:'Configura tu dominio en la pestaña "URLs de Usuario"'})]})})})]})]})},Ze=({products:u,apiBase:h})=>{const[b,C]=i.useState("create"),[w,r]=i.useState(""),[T,$]=i.useState(!1),[R,_]=i.useState([{id:"1",role:"assistant",text:"¡Hola! Soy tu asistente de diseño. ¿Cómo te gustaría que se vea tu tienda hoy? Puedes pedirme cambiar colores, disposición o estilo."}]),[l,y]=i.useState({name:"",category:"",logo:"",primaryColor:"#3b82f6",layout:"grid",selectedProducts:[]}),z=a=>{if(a.preventDefault(),!w.trim()||T)return;const c={id:Date.now().toString(),role:"user",text:w};_(k=>[...k,c]),r(""),$(!0);const n=w.toLowerCase();let g="Entendido, aplicaré esos cambios.",d={...l};n.includes("rojo")||n.includes("red")?(d.primaryColor="#ef4444",g="He cambiado el color principal a rojo intenso."):n.includes("azul")||n.includes("blue")?(d.primaryColor="#3b82f6",g="He cambiado el color principal a azul corporativo."):n.includes("verde")||n.includes("green")?(d.primaryColor="#10b981",g="He cambiado el color principal a verde esmeralda."):n.includes("naranja")||n.includes("orange")?(d.primaryColor="#f59e0b",g="He cambiado el color principal a naranja vibrante."):n.includes("morado")||n.includes("purple")?(d.primaryColor="#8b5cf6",g="He cambiado el color principal a morado creativo."):(n.includes("rosa")||n.includes("pink"))&&(d.primaryColor="#ec4899",g="He cambiado el color principal a rosa moderno."),n.includes("lista")||n.includes("list")?(d.layout="list",g+=" Y he cambiado la disposición a lista detallada."):(n.includes("cuadrícula")||n.includes("grid")||n.includes("cuadricula"))&&(d.layout="grid",g+=" Y he cambiado la disposición a cuadrícula visual."),setTimeout(()=>{y(d),_(k=>[...k,{id:(Date.now()+1).toString(),role:"assistant",text:g}]),$(!1)},1500)},j=a=>a&&a.startsWith("http")?a:`${h}${a||""}`,E=a=>{C(a)},S=a=>{y(c=>({...c,selectedProducts:c.selectedProducts.includes(a)?c.selectedProducts.filter(n=>n!==a):[...c.selectedProducts,a]}))},A=[{id:"create",label:"Detalles",icon:je},{id:"products",label:"Productos",icon:W},{id:"design",label:"Diseño",icon:Ce},{id:"deploy",label:"Publicar",icon:ye}];return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full min-h-[600px]",children:[e.jsxs("div",{className:"flex-1 bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden flex flex-col",children:[e.jsx("div",{className:"border-b border-gray-800 bg-gray-900/50 backdrop-blur-sm p-4",children:e.jsx("div",{className:"flex items-center justify-between max-w-2xl mx-auto",children:A.map((a,c)=>{const n=b===a.id,g=A.findIndex(d=>d.id===b)>c;return e.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 ${n?"bg-blue-600 text-white shadow-lg shadow-blue-900/20 scale-110":g?"bg-emerald-500 text-white":"bg-gray-800 text-gray-400"}`,children:g?e.jsx(be,{className:"w-5 h-5"}):e.jsx(a.icon,{className:"w-5 h-5"})}),e.jsx("span",{className:`text-xs mt-2 font-medium ${n?"text-blue-400":"text-gray-500"}`,children:a.label}),c<A.length-1&&e.jsx("div",{className:"absolute top-5 left-1/2 w-full h-[2px] -z-10 bg-gray-800",children:e.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-500",style:{width:g?"100%":"0%"}})})]},a.id)})})}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto custom-scrollbar",children:[b==="create"&&e.jsxs("div",{className:"max-w-xl mx-auto space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Configura tu Tienda"}),e.jsx("p",{className:"text-gray-400",children:"Comencemos con los detalles básicos de tu nuevo comercio."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Nombre de la Tienda"}),e.jsx("input",{type:"text",placeholder:"Ej: Mi Tienda Genial",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all",value:l.name,onChange:a=>y({...l,name:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Categoría Principal"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Tecnología","Moda","Hogar","Deportes"].map(a=>e.jsx("button",{onClick:()=>y({...l,category:a}),className:`p-3 rounded-xl border text-sm font-medium transition-all ${l.category===a?"bg-blue-600/10 border-blue-500 text-blue-400":"bg-gray-800 border-gray-700 text-gray-400 hover:border-gray-600"}`,children:a},a))})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:()=>E("products"),disabled:!l.name||!l.category,className:"w-full bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium py-3 rounded-xl transition-all shadow-lg shadow-blue-900/20 flex items-center justify-center gap-2",children:["Continuar ",e.jsx(q,{className:"w-4 h-4"})]})})]})]}),b==="products"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Selecciona tus Productos"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Elige qué productos quieres mostrar en tu tienda."})]}),e.jsxs("div",{className:"bg-blue-600/10 text-blue-400 px-3 py-1 rounded-full text-xs font-medium border border-blue-500/20",children:[l.selectedProducts.length," seleccionados"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(a=>e.jsxs("div",{onClick:()=>S(a.id),className:`group relative overflow-hidden rounded-xl border cursor-pointer transition-all ${l.selectedProducts.includes(a.id)?"border-blue-500 bg-blue-600/5 ring-1 ring-blue-500":"border-gray-700 bg-gray-800 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"aspect-video bg-gray-900 relative overflow-hidden",children:[a.image?e.jsx("img",{src:j(a.image),alt:a.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800 text-gray-600",children:e.jsx(W,{className:"w-8 h-8"})}),l.selectedProducts.includes(a.id)&&e.jsx("div",{className:"absolute top-2 right-2 bg-blue-500 text-white p-1 rounded-full shadow-lg",children:e.jsx(be,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"text-white font-medium truncate",children:a.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["$",a.price]})]})]},a.id))}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{onClick:()=>C("create"),className:"text-gray-400 hover:text-white px-4 py-2",children:"Atrás"}),e.jsxs("button",{onClick:()=>E("design"),className:"bg-blue-600 hover:bg-blue-500 text-white font-medium py-2 px-6 rounded-xl transition-all shadow-lg shadow-blue-900/20 flex items-center gap-2",children:["Continuar ",e.jsx(q,{className:"w-4 h-4"})]})]})]}),b==="design"&&e.jsxs("div",{className:"flex flex-col h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Diseña con IA"}),e.jsx("p",{className:"text-gray-400",children:"Chatea con Lovable para personalizar tu tienda al instante."})]}),e.jsxs("div",{className:"flex-1 bg-gray-950/50 rounded-2xl border border-gray-800 flex flex-col overflow-hidden mb-6",children:[e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4 custom-scrollbar",children:[R.map(a=>e.jsx("div",{className:`flex ${a.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${a.role==="user"?"bg-blue-600 text-white rounded-br-none":"bg-gray-800 text-gray-200 rounded-bl-none border border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 opacity-50 text-xs",children:[a.role==="assistant"&&e.jsx(fe,{className:"w-3 h-3"}),e.jsx("span",{className:"capitalize",children:a.role==="user"?"Tú":"Lovable AI"})]}),e.jsx("p",{className:"text-sm leading-relaxed",children:a.text})]})},a.id)),T&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"bg-gray-800 text-gray-200 rounded-2xl rounded-bl-none border border-gray-700 px-4 py-3 flex items-center gap-2",children:[e.jsx(fe,{className:"w-3 h-3"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce"})]})]})})]}),e.jsx("form",{onSubmit:z,className:"p-4 border-t border-gray-800 bg-gray-900",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:w,onChange:a=>r(a.target.value),placeholder:"Ej: 'Cambia el color a rojo' o 'Usa diseño de lista'...",className:"w-full bg-gray-950 border border-gray-700 rounded-xl pl-4 pr-12 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all"}),e.jsx("button",{type:"submit",disabled:!w.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Ke,{className:"w-4 h-4"})})]})})]}),e.jsxs("div",{className:"space-y-4 bg-gray-800/30 p-4 rounded-xl border border-gray-800/50",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-3",children:"Controles Manuales Rápidos"}),e.jsxs("div",{className:"flex gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex gap-2",children:["#3b82f6","#ef4444","#10b981","#f59e0b"].map(a=>e.jsx("button",{onClick:()=>y({...l,primaryColor:a}),className:`w-6 h-6 rounded-full border ${l.primaryColor===a?"border-white scale-110":"border-transparent opacity-50 hover:opacity-100"}`,style:{backgroundColor:a}},a))}),e.jsxs("div",{className:"flex bg-gray-900 rounded-lg p-1 border border-gray-700",children:[e.jsx("button",{onClick:()=>y({...l,layout:"grid"}),className:`px-3 py-1 rounded text-xs font-medium transition-all ${l.layout==="grid"?"bg-gray-700 text-white shadow-sm":"text-gray-500 hover:text-gray-300"}`,children:"Grid"}),e.jsx("button",{onClick:()=>y({...l,layout:"list"}),className:`px-3 py-1 rounded text-xs font-medium transition-all ${l.layout==="list"?"bg-gray-700 text-white shadow-sm":"text-gray-500 hover:text-gray-300"}`,children:"Lista"})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{onClick:()=>C("products"),className:"text-gray-400 hover:text-white px-4 py-2",children:"Atrás"}),e.jsxs("button",{onClick:()=>E("deploy"),className:"bg-blue-600 hover:bg-blue-500 text-white font-medium py-2 px-6 rounded-xl transition-all shadow-lg shadow-blue-900/20 flex items-center gap-2",children:["Continuar ",e.jsx(q,{className:"w-4 h-4"})]})]})]}),b==="deploy"&&e.jsxs("div",{className:"max-w-md mx-auto text-center space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 py-8",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto shadow-2xl shadow-blue-900/40",children:e.jsx(ye,{className:"w-10 h-10 text-white animate-pulse"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"¡Todo listo!"}),e.jsx("p",{className:"text-gray-400",children:"Tu tienda está lista para ser generada y desplegada."})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700 text-left space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Nombre:"}),e.jsx("span",{className:"text-white font-medium",children:l.name})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Categoría:"}),e.jsx("span",{className:"text-white font-medium",children:l.category})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Productos:"}),e.jsxs("span",{className:"text-white font-medium",children:[l.selectedProducts.length," items"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Tema:"}),e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:l.primaryColor}})]})]}),e.jsxs("button",{className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold py-4 rounded-xl transition-all shadow-lg shadow-blue-900/30 flex items-center justify-center gap-2 transform hover:scale-[1.02]",onClick:()=>alert("¡Desplegando tienda!"),children:[e.jsx(Se,{className:"w-5 h-5"}),"Lanzar Tienda Ahora"]}),e.jsx("button",{onClick:()=>C("design"),className:"text-gray-500 hover:text-white text-sm",children:"Volver a editar"})]})]})]}),e.jsx("div",{className:"w-full lg:w-96 shrink-0 hidden lg:block",children:e.jsxs("div",{className:"sticky top-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4"})," Vista Previa"]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-medium bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",children:"ONLINE"})})]}),e.jsxs("div",{className:"border border-gray-700 rounded-[2rem] overflow-hidden shadow-2xl bg-white h-[600px] flex flex-col relative ring-8 ring-gray-900",children:[e.jsxs("div",{className:"bg-slate-100 border-b p-3 flex items-center gap-2 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-400"}),e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-400"}),e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-400"})]}),e.jsx("div",{className:"flex-1 bg-white rounded-md text-[10px] px-2 py-1 text-center text-slate-400 truncate shadow-sm",children:l.name?`https://${l.name.toLowerCase().replace(/\s/g,"-")}.lovable.app`:"https://tu-tienda.lovable.app"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-slate-50 custom-scrollbar-light",children:[e.jsx("div",{className:"p-4 bg-white shadow-sm sticky top-0 z-10 transition-colors duration-300",style:{borderTop:`4px solid ${l.primaryColor}`},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-slate-100 flex items-center justify-center text-slate-500",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-slate-800 text-sm truncate max-w-[120px]",children:l.name||"Nombre Tienda"})]}),e.jsx(W,{className:"w-5 h-5 text-slate-400"})]})}),e.jsx("div",{className:"bg-slate-200 h-32 flex items-center justify-center text-slate-400",children:e.jsx("span",{className:"text-xs uppercase tracking-widest font-medium",children:"Banner Principal"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-bold text-slate-800 mb-3 text-sm",children:"Destacados"}),e.jsx("div",{className:`grid gap-3 ${l.layout==="grid"?"grid-cols-2":"grid-cols-1"}`,children:l.selectedProducts.length>0?l.selectedProducts.map(a=>{const c=u.find(n=>n.id===a);return c?e.jsxs("div",{className:`bg-white rounded-lg shadow-sm overflow-hidden group ${l.layout==="list"?"flex":""}`,children:[e.jsx("div",{className:`${l.layout==="list"?"w-20 h-20":"aspect-square"} bg-slate-100 relative`,children:c.image?e.jsx("img",{src:j(c.image),className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-200 text-slate-400",children:e.jsx(W,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"font-medium text-slate-800 text-xs mb-1 truncate",children:c.name}),e.jsxs("div",{className:"text-emerald-600 font-bold text-xs",children:["$",c.price]}),e.jsx("button",{className:"mt-2 w-full py-1 rounded text-[10px] font-medium text-white opacity-0 group-hover:opacity-100 transition-opacity",style:{backgroundColor:l.primaryColor},children:"Agregar"})]})]},a):null}):[1,2,3,4].map(a=>e.jsxs("div",{className:"bg-white rounded-lg p-2 shadow-sm opacity-50",children:[e.jsx("div",{className:"aspect-square bg-slate-100 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-slate-100 rounded w-3/4 mb-1"}),e.jsx("div",{className:"h-3 bg-slate-100 rounded w-1/2"})]},a))})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(we,{className:"w-3 h-3"})," Vista móvil optimizada"]})})]})})]})},xs=({token:u,apiBase:h,setView:b,setProductEditing:C})=>{const w=(s,o=!0)=>({...o?{"Content-Type":"application/json"}:{},...s?{Authorization:`Bearer ${s}`}:{}}),[r,T]=i.useState("productos"),[$,R]=i.useState([]),[_,l]=i.useState([]),[y,z]=i.useState(""),[j,E]=i.useState(""),[S,A]=i.useState(""),[a,c]=i.useState(null),[n,g]=i.useState(!1),[d,k]=i.useState({}),[D,F]=i.useState({}),[U,G]=i.useState(""),[x,K]=i.useState(null),[H,t]=i.useState(!1),[p,m]=i.useState(!1),[v,f]=i.useState(""),[Q,$e]=i.useState(void 0),se=s=>s&&s.startsWith("http")?s:`${h}${s||""}`,Y=async(s,o)=>{let N=o;if(!N)try{const L=await fetch(`${h}/webconfig/templates/my/`,{headers:w(u)});if(L.ok){const I=await L.json();I.results&&I.results.length>0&&(N=I.results[0].id)}}catch(L){console.error("Error fetching personal templates",L)}f(s||U||"localhost:8000"),$e(N),m(!0)},te=async()=>{g(!0);try{const s=w(u),[o,N,L,I,Ae]=await Promise.all([fetch(`${h}/products/categories/?page_size=100`,{headers:s}),fetch(`${h}/products/`,{headers:s}),fetch(`${h}/webconfig/visible-products/`,{headers:s}),fetch(`${h}/webconfig/visible-categories/`,{headers:s}),fetch(`${h}/webconfig/site-url/status/`,{headers:s})]),Le=await o.json(),re=await N.json(),le=await L.json(),ie=await I.json(),oe=await Ae.json();R(Le.results||[]),l(Array.isArray(re)?re:[]);const ne={};Array.isArray(le)&&le.forEach(V=>{V.active&&(ne[V.product]=!0)}),k(ne);const ce={};Array.isArray(ie)&&ie.forEach(V=>{V.active&&(ce[V.category]=!0)}),F(ce),K(oe),G(oe.site_url||"")}catch(s){console.error(s),c({type:"error",text:"Error al cargar datos"})}finally{g(!1)}};i.useEffect(()=>{u&&te()},[u]);const ae=i.useMemo(()=>_.filter(s=>{const o=y.trim().toLowerCase(),N=!o||s.name.toLowerCase().includes(o)||(s.description||"").toLowerCase().includes(o)||(s.sku||"").toLowerCase().includes(o),L=!j||s.category&&String(s.category.id)===String(j),I=!S||String(!!s.active)===String(S==="1");return N&&L&&I}),[_,y,j,S]),_e=async s=>{s&&s.preventDefault(),b&&b("producto_form")},ze=async s=>{if(confirm("Eliminar producto?"))try{if(!(await fetch(`${h}/products/${s.id}/`,{method:"DELETE",headers:w(u)})).ok)throw new Error("No se pudo eliminar");te()}catch{}},Ee=async(s,o)=>{k(N=>({...N,[s.id]:o}));try{await fetch(`${h}/webconfig/visible-products/${s.id}/`,{method:"PUT",headers:w(u),body:JSON.stringify({active:!!o})})}catch{}},Pe=async(s,o)=>{F(N=>({...N,[s.id]:o}));try{await fetch(`${h}/webconfig/visible-categories/${s.id}/`,{method:"PUT",headers:w(u),body:JSON.stringify({active:!!o})})}catch{}},Te=async s=>{s.preventDefault(),c(null),t(!0);try{const o=await fetch(`${h}/webconfig/site-url/claim/`,{method:"POST",headers:w(u),body:JSON.stringify({site_url:U})}),N=await o.json();if(!o.ok)throw new Error(N.detail||"Error al guardar URL");c({type:"success",text:"URL actualizada correctamente"}),K({...x,site_url:U,ok:!0})}catch(o){c({type:"error",text:o.message})}finally{t(!1)}},O=({id:s,label:o,icon:N})=>e.jsxs("button",{onClick:()=>T(s),className:`px-4 py-2.5 rounded-xl flex items-center gap-2 text-sm font-medium transition-all ${r===s?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white border border-transparent hover:border-gray-600"}`,children:[e.jsx(N,{className:"w-4 h-4"}),o]});return p?e.jsx(Xe,{token:u,apiBase:h,siteUrl:v,templateId:Q,onClose:()=>m(!1)}):e.jsxs("div",{className:"space-y-6 relative animate-in fade-in duration-500",children:[n&&!_.length&&e.jsx("div",{className:"absolute inset-0 z-50 bg-gray-950/50 backdrop-blur-sm flex items-center justify-center rounded-2xl",children:e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 shadow-2xl flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin mb-4"}),e.jsx("div",{className:"text-white font-medium",children:"Cargando datos..."})]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 bg-gray-900 p-2 rounded-2xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{id:"productos",label:"Productos",icon:Z}),e.jsx(O,{id:"categorias",label:"Categorías",icon:pe}),e.jsx(O,{id:"urls",label:"URLs de Usuario",icon:J}),e.jsx(O,{id:"plantillas",label:"Plantillas",icon:ee}),e.jsx(O,{id:"mis_plantillas",label:"Mis Plantillas",icon:ee}),e.jsx(O,{id:"lovable",label:"Lovable AI",icon:Se})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(x==null?void 0:x.ok)&&e.jsxs("button",{onClick:()=>Y(),className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white text-sm font-medium transition-all shadow-lg shadow-blue-900/20 flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),"Personalizar Sitio"]}),r==="productos"&&e.jsx("button",{onClick:_e,className:"px-4 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium transition-all shadow-lg shadow-indigo-900/20",children:"Crear Producto"})]})]}),a&&e.jsxs("div",{className:`p-4 rounded-xl text-sm flex items-center gap-3 border ${a.type==="success"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-rose-500/10 text-rose-400 border-rose-500/20"}`,children:[a.type==="success"?e.jsx(X,{size:18}):e.jsx(me,{size:18}),a.text]}),e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden shadow-sm min-h-[400px]",children:[r==="productos"&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{value:y,onChange:s=>z(s.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-gray-800 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"Buscar producto..."})]}),e.jsxs("select",{value:j,onChange:s=>E(s.target.value),className:"px-4 py-2.5 bg-gray-800 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[e.jsx("option",{value:"",children:"Todas las categorías"}),$.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("select",{value:S,onChange:s=>A(s.target.value),className:"px-4 py-2.5 bg-gray-800 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"1",children:"Activos"}),e.jsx("option",{value:"0",children:"Inactivos"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[ae.map(s=>{var o;return e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-4 hover:border-gray-600 transition-colors group",children:[e.jsxs("div",{className:"aspect-video bg-gray-800 rounded-lg mb-3 overflow-hidden border border-gray-700 relative",children:[s.image?e.jsx("img",{src:se(s.image),alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:e.jsx(Z,{className:"w-8 h-8 opacity-50"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("button",{onClick:()=>Ee(s,!d[s.id]),className:`p-1.5 rounded-lg backdrop-blur-sm border transition-colors ${d[s.id]?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"bg-gray-900/60 text-gray-400 border-gray-700 hover:text-white"}`,title:d[s.id]?"Visible en web":"Oculto en web",children:d[s.id]?e.jsx(Ue,{size:14}):e.jsx(Fe,{size:14})})})]}),e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-white truncate",title:s.name,children:s.name}),e.jsx("span",{className:"font-bold text-emerald-400 shrink-0",children:Number(s.price||0).toLocaleString("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mb-3",children:[e.jsx("span",{className:"bg-gray-700 px-2 py-0.5 rounded text-gray-300",children:((o=s.category)==null?void 0:o.name)||"Sin cat."}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Stock: ",Number(s.total_stock??s.inventory_qty??0)]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-auto pt-3 border-t border-gray-700/50",children:[e.jsxs("button",{onClick:()=>C&&C(s),className:"flex-1 py-1.5 rounded-lg bg-indigo-600/10 hover:bg-indigo-600/20 text-indigo-400 text-xs font-medium transition-colors flex items-center justify-center gap-1",children:[e.jsx(xe,{size:14})," Editar"]}),e.jsxs("button",{onClick:()=>ze(s),className:"flex-1 py-1.5 rounded-lg bg-rose-600/10 hover:bg-rose-600/20 text-rose-400 text-xs font-medium transition-colors flex items-center justify-center gap-1",children:[e.jsx(Ne,{size:14})," Eliminar"]})]})]},s.id)}),ae.length===0&&e.jsxs("div",{className:"col-span-full py-12 text-center text-gray-500",children:[e.jsx(Z,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"No se encontraron productos"})]})]})]}),r==="categorias"&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{value:y,onChange:s=>z(s.target.value),className:"w-full md:w-1/2 pl-9 pr-4 py-2.5 bg-gray-800 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50",placeholder:"Buscar categoría..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[($||[]).filter(s=>!y||(s.name||s.nombre||"").toLowerCase().includes(y.toLowerCase())).map(s=>e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-4 flex items-center gap-4 hover:border-gray-600 transition-colors",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-800 border border-gray-700 overflow-hidden shrink-0",children:s.image?e.jsx("img",{src:se(s.image),alt:s.name||s.nombre,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600 text-xs",children:"Sin img"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-white truncate",children:s.name||s.nombre}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["ID: ",s.id]}),e.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer group",children:[e.jsx("div",{className:`w-9 h-5 rounded-full p-0.5 transition-colors ${D[s.id]?"bg-blue-600":"bg-gray-700"}`,children:e.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transform transition-transform ${D[s.id]?"translate-x-4":"translate-x-0"}`})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:!!D[s.id],onChange:o=>Pe(s,o.target.checked)}),e.jsx("span",{className:`text-xs transition-colors ${D[s.id]?"text-blue-400":"text-gray-400 group-hover:text-gray-300"}`,children:D[s.id]?"Visible en web":"Oculto"})]})]})]},s.id)),(!$||$.length===0)&&e.jsxs("div",{className:"col-span-full py-12 text-center text-gray-500",children:[e.jsx(pe,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"No hay categorías disponibles"})]})]})]}),r==="urls"&&e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(J,{className:"w-8 h-8 text-blue-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Configuración de Dominio"}),e.jsx("p",{className:"text-gray-400",children:"Define la dirección web donde tus clientes podrán acceder a tu tienda."})]}),e.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-2xl p-6 shadow-xl",children:e.jsxs("form",{onSubmit:Te,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"URL del Sitio"}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),e.jsx("input",{type:"text",value:U,onChange:s=>G(s.target.value),placeholder:"ejemplo.com",className:"w-full pl-10 pr-4 py-3 bg-gray-900 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Ingresa el dominio sin http:// o https://"})]}),e.jsx("div",{className:"flex items-center justify-end pt-4",children:e.jsx("button",{type:"submit",disabled:H,className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-medium transition-all shadow-lg shadow-blue-900/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:H?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-4 h-4 animate-spin"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4"}),"Guardar Configuración"]})})})]})}),x&&e.jsxs("div",{className:`p-6 rounded-2xl border flex items-start gap-4 ${x.ok?"bg-emerald-500/10 border-emerald-500/20":"bg-rose-500/10 border-rose-500/20"}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${x.ok?"bg-emerald-500/20 text-emerald-400":"bg-rose-500/20 text-rose-400"}`,children:x.ok?e.jsx(X,{size:24}):e.jsx(me,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold mb-1 ${x.ok?"text-emerald-400":"text-rose-400"}`,children:x.ok?"Configuración Correcta":"Error de Configuración"}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:x.message}),x.ok&&e.jsxs("a",{href:`https://${x.site_url}`,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 mt-3 text-sm font-medium text-emerald-400 hover:text-emerald-300 hover:underline",children:["Visitar sitio ",e.jsx(De,{size:14})]})]})]})]})}),r==="plantillas"&&e.jsx("div",{className:"p-6",children:e.jsx(ge,{token:u,onOpenEditor:Y})}),r==="mis_plantillas"&&e.jsx("div",{className:"p-6",children:e.jsx(ge,{personal:!0,token:u,onOpenEditor:Y})}),r==="lovable"&&e.jsx("div",{className:"p-6",children:e.jsx(Ze,{products:_,apiBase:h})})]})]})};export{xs as default};
