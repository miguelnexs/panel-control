import{r as i,j as t}from"./index-DLBiUv4k.js";import"./vendor-BtP0CW_r.js";const je=({token:d,apiBase:r,adminId:v,role:y,setView:P,setProductEditing:w})=>{const l=(e,s=!0)=>({...s?{"Content-Type":"application/json"}:{},...e?{Authorization:`Bearer ${e}`}:{}}),[x,$]=i.useState("productos"),[f,D]=i.useState([]),[A,k]=i.useState([]),[u,a]=i.useState(""),[b,E]=i.useState(""),[T,te]=i.useState(""),[pe,ye]=i.useState({name:"",description:"",price:"",category_id:"",stock:"",active:!0,images:[]}),[R,be]=i.useState(null),[o,M]=i.useState({primary_color:"#0ea5e9",secondary_color:"#1f2937",font_family:"Inter, system-ui, sans-serif",currencies:"COP",site_url:"",company_name:"",company_nit:"",company_phone:"",company_whatsapp:"",company_email:"",company_address:"",company_description:""}),[U,W]=i.useState({shipping_text:"",returns_text:""}),[J,L]=i.useState([]),[q,z]=i.useState(!1),[_,se]=i.useState({visits_total:0,conversions_total:0}),[ae,V]=i.useState({}),[re,G]=i.useState({}),F=e=>e&&e.startsWith("http")?e:`${r}${e||""}`,I=async()=>{z(!0);try{const e=l(d),[s,n,g,h,j,N,O,c]=await Promise.all([fetch(`${r}/products/categories/?page_size=100`,{headers:e}),fetch(`${r}/products/`,{headers:e}),fetch(`${r}/webconfig/settings/`,{headers:e}),fetch(`${r}/webconfig/policy/`,{headers:e}),fetch(`${r}/webconfig/payments/`,{headers:e}),fetch(`${r}/webconfig/stats/`,{headers:e}),fetch(`${r}/webconfig/visible-products/`,{headers:e}),fetch(`${r}/webconfig/visible-categories/`,{headers:e})]),xe=await s.json(),H=await n.json(),ge=await g.json(),he=await h.json(),X=await j.json(),me=await N.json(),Y=await O.json(),Z=await c.json();D(xe.results||[]),k(Array.isArray(H)?H:[]),M({...o,...ge}),W(he),L(Array.isArray(X)?X:[]),se(me);const B={};Array.isArray(Y)&&Y.forEach(S=>{S.active&&(B[S.product]=!0)}),V(B);const ee={};Array.isArray(Z)&&Z.forEach(S=>{S.active&&(ee[S.category]=!0)}),G(ee)}catch{}finally{z(!1)}};i.useEffect(()=>{d&&I()},[d]),i.useEffect(()=>{const e=setInterval(()=>{x==="productos"&&I()},7e3);return()=>clearInterval(e)},[x,d]);const K=i.useMemo(()=>A.filter(e=>{const s=u.trim().toLowerCase(),n=!s||e.name.toLowerCase().includes(s)||(e.description||"").toLowerCase().includes(s)||(e.sku||"").toLowerCase().includes(s),g=!b||e.category&&String(e.category.id)===String(b),h=!T||String(!!e.active)===String(T==="1");return n&&g&&h}),[A,u,b,T]),ie=async e=>{e&&e.preventDefault(),P&&P("producto_form")},ce=async e=>{if(confirm("Eliminar producto?"))try{if(!(await fetch(`${r}/products/${e.id}/`,{method:"DELETE",headers:l(d)})).ok)throw new Error("No se pudo eliminar");I()}catch{}},oe=async(e,s)=>{V(n=>({...n,[e.id]:s}));try{await fetch(`${r}/webconfig/visible-products/${e.id}/`,{method:"PUT",headers:l(d),body:JSON.stringify({active:!!s})})}catch{}},ne=async(e,s)=>{G(n=>({...n,[e.id]:s}));try{await fetch(`${r}/webconfig/visible-categories/${e.id}/`,{method:"PUT",headers:l(d),body:JSON.stringify({active:!!s})})}catch{}},p=async e=>{const s={...o,...e};M(s);try{await fetch(`${r}/webconfig/settings/`,{method:"PUT",headers:l(d),body:JSON.stringify(s)})}catch{}},de=async e=>{const s=new FormData;s.append("logo",e);try{const g=await(await fetch(`${r}/webconfig/settings/`,{method:"PUT",headers:l(d,!1),body:s})).json();M(g)}catch{}},Q=async e=>{const s={...U,...e};W(s);try{await fetch(`${r}/webconfig/policy/`,{method:"PUT",headers:l(d),body:JSON.stringify(s)})}catch{}},C=async e=>{const s={mercadopago:"MercadoPago",paypal:"PayPal",stripe:"Stripe",whatsapp:"WhatsApp",credit_card:"Tarjeta crédito"},n=e==="mercadopago"?3.5:e==="paypal"?3.9:e==="stripe"?2.9:0,g={name:s[e]||"Pago",provider:e,fee_percent:n,active:!0,currencies:o.currencies,extra_config:{}};try{const h=await fetch(`${r}/webconfig/payments/`,{method:"POST",headers:l(d),body:JSON.stringify(g)}),j=await h.json();h.ok&&L(N=>[...N,j])}catch{}},m=async(e,s)=>{if(!e.id)return;const n={...e,...s};L(g=>g.map(h=>h.id===e.id?n:h));try{await fetch(`${r}/webconfig/payments/${e.id}/`,{method:"PATCH",headers:l(d),body:JSON.stringify(s)})}catch{}},le=async e=>{if(e.id)try{await fetch(`${r}/webconfig/payments/${e.id}/`,{method:"DELETE",headers:l(d)}),L(s=>s.filter(n=>n.id!==e.id))}catch{}};return t.jsxs("div",{className:"space-y-4 relative",children:[q&&t.jsx("div",{className:"absolute inset-0 z-50 bg-gray-900 flex items-center justify-center",children:t.jsxs("div",{className:"bg-gray-800/80 border border-white/10 rounded-xl p-6 shadow-xl text-center",children:[t.jsx("div",{className:"mx-auto w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"}),t.jsx("div",{className:"mt-3 text-white font-medium",children:"Cargando datos..."}),t.jsx("div",{className:"text-xs text-gray-300",children:"Por favor espera"})]})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center gap-2",children:["productos","categorias","pagos","config","portal","politicas","estadisticas"].map(e=>t.jsx("button",{onClick:()=>$(e),className:`px-3 py-1.5 rounded ${x===e?"bg-blue-600 text-white":"bg-white/5 text-gray-300 border border-white/10 hover:bg-white/10"}`,children:e==="productos"?"Productos":e==="categorias"?"Categorías":e==="pagos"?"Pagos":e==="config"?"Configuración":e==="portal"?"Portal":e==="politicas"?"Políticas":"Estadísticas"},e))}),x==="productos"&&t.jsx("button",{onClick:ie,className:"px-3 py-1.5 rounded bg-indigo-600 hover:bg-indigo-700 text-white",children:"Crear nuevo"})]}),R&&t.jsx("div",{className:`p-3 rounded text-sm ${R.type==="success"?"bg-green-600/20 text-green-200 border border-green-500/40":"bg-red-600/20 text-red-200 border border-red-500/40"}`,children:R.text}),t.jsxs("div",{className:`${q?"opacity-0":"opacity-100"} transition-opacity duration-300`,children:[x==="productos"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{value:u,onChange:e=>a(e.target.value),className:"flex-1 px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"Buscar por palabra clave"}),t.jsxs("select",{value:b,onChange:e=>E(e.target.value),className:"px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",children:[t.jsx("option",{value:"",children:"Todas las categorías"}),f.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]}),t.jsxs("select",{value:T,onChange:e=>te(e.target.value),className:"px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",children:[t.jsx("option",{value:"",children:"Todos"}),t.jsx("option",{value:"1",children:"Activos"}),t.jsx("option",{value:"0",children:"Inactivos"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:[K.map(e=>t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-3 text-white",children:[t.jsx("div",{className:"aspect-video bg-gray-800 rounded mb-2 overflow-hidden",children:e.image?t.jsx("img",{src:F(e.image),alt:e.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:"Sin imagen"})}),t.jsx("div",{className:"font-medium",children:e.name}),t.jsxs("div",{className:"text-xs text-gray-300",children:[e.category?e.category.name:"Sin categoría"," • ",e.active?"Activo":"Inactivo"]}),t.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:["Stock: ",Number(e.total_stock??e.inventory_qty??0)]}),t.jsxs("label",{className:"mt-1 inline-flex items-center gap-2 text-xs text-gray-300",children:[t.jsx("input",{type:"checkbox",checked:!!ae[e.id],onChange:s=>oe(e,s.target.checked)})," Mostrar en página web"]}),t.jsx("div",{className:"text-sm mt-1",children:Number(e.price||0).toLocaleString("es-CO",{style:"currency",currency:"COP"})}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("button",{onClick:()=>{w&&w(e)},className:"px-2 py-1 text-xs rounded bg-indigo-600 hover:bg-indigo-700",children:"Editar"}),t.jsx("button",{onClick:()=>ce(e),className:"px-2 py-1 text-xs rounded bg-red-600 hover:bg-red-700",children:"Eliminar"})]})]},e.id)),K.length===0&&t.jsx("div",{className:"text-gray-300 text-sm",children:"No hay productos con los filtros seleccionados."})]})]}),x==="categorias"&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("input",{value:u,onChange:e=>a(e.target.value),className:"flex-1 px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"Buscar por categoría"})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:[(f||[]).filter(e=>!u||(e.name||e.nombre||"").toLowerCase().includes(u.toLowerCase())).map(e=>t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-3 text-white flex items-center gap-3",children:[t.jsx("div",{className:"w-16 h-16 rounded overflow-hidden bg-gray-800 flex items-center justify-center",children:e.image?t.jsx("img",{src:F(e.image),alt:e.name||e.nombre,className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-gray-400 text-xs",children:"Sin imagen"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium",children:e.name||e.nombre}),t.jsxs("div",{className:"text-xs text-gray-300",children:["ID ",e.id]}),t.jsxs("label",{className:"mt-1 inline-flex items-center gap-2 text-xs text-gray-300",children:[t.jsx("input",{type:"checkbox",checked:!!re[e.id],onChange:s=>ne(e,s.target.checked)})," Mostrar en página web"]})]})]},e.id)),(!f||f.length===0)&&t.jsx("div",{className:"text-gray-300 text-sm",children:"No hay categorías."})]})]}),x==="pagos"&&t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"text-white font-medium",children:"Métodos de pago"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>C("mercadopago"),className:"px-2 py-1 text-xs rounded bg-blue-600 hover:bg-blue-700 text-white",children:"MercadoPago"}),t.jsx("button",{onClick:()=>C("paypal"),className:"px-2 py-1 text-xs rounded bg-blue-600 hover:bg-blue-700 text-white",children:"PayPal"}),t.jsx("button",{onClick:()=>C("stripe"),className:"px-2 py-1 text-xs rounded bg-blue-600 hover:bg-blue-700 text-white",children:"Stripe"}),t.jsx("button",{onClick:()=>C("credit_card"),className:"px-2 py-1 text-xs rounded bg-blue-600 hover:bg-blue-700 text-white",children:"Tarjeta"}),t.jsx("button",{onClick:()=>C("whatsapp"),className:"px-2 py-1 text-xs rounded bg-green-600 hover:bg-green-700 text-white",children:"WhatsApp"})]})]}),t.jsxs("ul",{className:"space-y-3",children:[J.map(e=>{var s,n,g,h,j,N,O;return t.jsxs("li",{className:"bg-gray-700/50 border border-gray-600 rounded p-3 text-sm text-white",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"flex-1",children:[e.name," ",t.jsxs("span",{className:"text-gray-300",children:["(",e.provider,")"]})]}),t.jsxs("label",{className:"flex items-center gap-1 text-xs",children:[t.jsx("span",{children:"Activo"}),t.jsx("input",{type:"checkbox",checked:!!e.active,onChange:c=>m(e,{active:c.target.checked})})]}),t.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[t.jsx("span",{children:"Comisión"}),t.jsx("input",{type:"number",step:"0.1",value:e.fee_percent,onChange:c=>m(e,{fee_percent:Number(c.target.value||0)}),className:"w-20 px-2 py-1 rounded bg-gray-800 border border-gray-600"}),"%"]}),t.jsx("input",{value:e.currencies,onChange:c=>m(e,{currencies:c.target.value}),className:"w-32 px-2 py-1 rounded bg-gray-800 border border-gray-600 text-xs",placeholder:"Monedas (p.ej. COP,USD)"}),t.jsx("button",{onClick:()=>le(e),className:"px-2 py-1 text-xs rounded bg-red-600 hover:bg-red-700",children:"Eliminar"})]}),t.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.provider==="mercadopago"&&t.jsxs(t.Fragment,{children:[t.jsx("input",{value:((s=e.extra_config)==null?void 0:s.access_token)||"",onChange:c=>m(e,{extra_config:{...e.extra_config||{},access_token:c.target.value}}),className:"px-2 py-1 rounded bg-gray-800 border border-gray-600 text-xs",placeholder:"Access Token"}),t.jsx("input",{value:((n=e.extra_config)==null?void 0:n.public_key)||"",onChange:c=>m(e,{extra_config:{...e.extra_config||{},public_key:c.target.value}}),className:"px-2 py-1 rounded bg-gray-800 border border-gray-600 text-xs",placeholder:"Public Key"})]}),e.provider==="paypal"&&t.jsxs(t.Fragment,{children:[t.jsx("input",{value:((g=e.extra_config)==null?void 0:g.client_id)||"",onChange:c=>m(e,{extra_config:{...e.extra_config||{},client_id:c.target.value}}),className:"px-2 py-1 rounded bg-gray-800 border border-gray-600 text-xs",placeholder:"Client ID"}),t.jsx("input",{value:((h=e.extra_config)==null?void 0:h.client_secret)||"",onChange:c=>m(e,{extra_config:{...e.extra_config||{},client_secret:c.target.value}}),className:"px-2 py-1 rounded bg-gray-800 border border-gray-600 text-xs",placeholder:"Client Secret"})]}),e.provider==="stripe"&&t.jsx("input",{value:((j=e.extra_config)==null?void 0:j.api_key)||"",onChange:c=>m(e,{extra_config:{...e.extra_config||{},api_key:c.target.value}}),className:"px-2 py-1 rounded bg-gray-800 border border-gray-600 text-xs",placeholder:"API Key"}),e.provider==="whatsapp"&&t.jsxs(t.Fragment,{children:[t.jsx("input",{value:((N=e.extra_config)==null?void 0:N.phone)||"",onChange:c=>m(e,{extra_config:{...e.extra_config||{},phone:c.target.value}}),className:"px-2 py-1 rounded bg-gray-800 border border-gray-600 text-xs",placeholder:"Teléfono WhatsApp"}),t.jsx("input",{value:((O=e.extra_config)==null?void 0:O.template)||"",onChange:c=>m(e,{extra_config:{...e.extra_config||{},template:c.target.value}}),className:"px-2 py-1 rounded bg-gray-800 border border-gray-600 text-xs",placeholder:"Plantilla de mensaje"})]})]})]},e.id)}),J.length===0&&t.jsx("li",{className:"text-gray-300 text-sm",children:"No hay métodos configurados."})]})]}),x==="config"&&t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-4",children:[t.jsx("div",{className:"text-white font-medium mb-3",children:"Configuración"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"URL de la página"}),t.jsx("input",{value:o.site_url||"",onChange:e=>p({site_url:e.target.value}),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"https://mi-tienda.com"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"Monedas aceptadas"}),t.jsx("input",{value:o.currencies,onChange:e=>p({currencies:e.target.value}),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"COP,USD"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"Nombre de la empresa"}),t.jsx("input",{value:o.company_name||"",onChange:e=>p({company_name:e.target.value}),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"CG by Caro Gonzalez"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"NIT"}),t.jsx("input",{value:o.company_nit||"",onChange:e=>p({company_nit:e.target.value}),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"1088297299-0"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"Teléfono"}),t.jsx("input",{value:o.company_phone||"",onChange:e=>p({company_phone:e.target.value}),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"314 7435305"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"WhatsApp"}),t.jsx("input",{value:o.company_whatsapp||"",onChange:e=>p({company_whatsapp:e.target.value}),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"314 7435305"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"Correo"}),t.jsx("input",{type:"email",value:o.company_email||"",onChange:e=>p({company_email:e.target.value}),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"info@cgbycaro.com"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"Dirección"}),t.jsx("input",{value:o.company_address||"",onChange:e=>p({company_address:e.target.value}),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"Cra 7 # 15-57, Local 101, Pereira, Colombia"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"Descripción"}),t.jsx("textarea",{value:o.company_description||"",onChange:e=>p({company_description:e.target.value}),className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",rows:4,placeholder:"Breve descripción de la empresa"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("div",{className:"text-xs text-gray-300 mb-1",children:"Logo"}),t.jsx("input",{type:"file",accept:"image/*",onChange:e=>e.target.files&&e.target.files[0]&&de(e.target.files[0]),className:"w-full text-sm text-gray-300"}),o.logo&&t.jsx("img",{src:F(o.logo),alt:"Logo",className:"mt-2 h-12 object-contain"})]})]})]}),x==="portal"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-white font-medium",children:"Portal público"}),o.site_url&&t.jsx("a",{href:`${o.site_url}${v?(o.site_url.includes("?")?"&":"?")+"aid="+v:""}`,target:"_blank",rel:"noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm",children:"Abrir sitio"})]}),t.jsx("div",{className:"text-xs text-gray-300",children:"Acceso sin inicio de sesión."})]}),t.jsx(ue,{token:d,apiBase:r,adminId:v})]}),x==="politicas"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-4",children:[t.jsx("div",{className:"text-white font-medium mb-2",children:"Política de envío"}),t.jsx("textarea",{value:U.shipping_text,onChange:e=>Q({shipping_text:e.target.value}),rows:8,className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"Detalles de envío"})]}),t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-4",children:[t.jsx("div",{className:"text-white font-medium mb-2",children:"Política de devoluciones"}),t.jsx("textarea",{value:U.returns_text,onChange:e=>Q({returns_text:e.target.value}),rows:8,className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",placeholder:"Detalles de devoluciones"})]})]}),x==="estadisticas"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-4",children:[t.jsx("div",{className:"text-xs text-gray-300",children:"Visitas totales"}),t.jsx("div",{className:"text-2xl font-semibold text-white mt-1",children:_.visits_total})]}),t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-4",children:[t.jsx("div",{className:"text-xs text-gray-300",children:"Conversiones totales"}),t.jsx("div",{className:"text-2xl font-semibold text-white mt-1",children:_.conversions_total})]}),t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-4",children:[t.jsx("div",{className:"text-xs text-gray-300",children:"Ratio"}),t.jsxs("div",{className:"text-2xl font-semibold text-white mt-1",children:[_.visits_total?(_.conversions_total/_.visits_total*100).toFixed(2):"0.00","%"]})]})]})]})]})},ue=({token:d,apiBase:r,adminId:v})=>{var k,u;const[y,P]=i.useState(null),[w,l]=i.useState("idle"),[x,$]=i.useState(null),f=a=>({"Content-Type":"application/json"}),D=async()=>{l("loading"),$(null);try{const a=v?`?aid=${v}`:"",b=await fetch(`${r}/webconfig/public/portal/${a}`,{headers:f(null)}),E=await b.json();if(!b.ok)throw new Error(E.detail||"Error");P(E),l("ok")}catch(a){$(a.message),l("error")}};i.useEffect(()=>{D()},[d]);const A=a=>a&&a.startsWith("http")?a:`${r}${a||""}`;return w==="loading"?t.jsx("div",{className:"p-4 bg-white/5 border border-white/10 rounded text-sm text-gray-300",children:"Cargando portal..."}):w==="error"?t.jsx("div",{className:"p-4 bg-red-600/20 border border-red-500/40 rounded text-sm text-red-200",children:x}):y?t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[t.jsx("div",{className:"lg:col-span-2 space-y-3",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:[Array.isArray(y.products)&&y.products.map(a=>t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-3 text-white",children:[t.jsx("div",{className:"aspect-video bg-gray-800 rounded mb-2 overflow-hidden",children:a.image?t.jsx("img",{src:A(a.image),alt:a.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:"Sin imagen"})}),t.jsx("div",{className:"font-medium",children:a.name}),t.jsxs("div",{className:"text-xs text-gray-300",children:[a.category?a.category.name:"Sin categoría"," • ",a.active?"Activo":"Inactivo"]}),t.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:["Stock: ",Number(a.total_stock??a.inventory_qty??0)]}),t.jsx("div",{className:"text-sm mt-1",children:Number(a.price||0).toLocaleString("es-CO",{style:"currency",currency:"COP"})})]},a.id)),(!y.products||y.products.length===0)&&t.jsx("div",{className:"text-gray-300 text-sm",children:"No hay productos visibles."})]})}),t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-4",children:[t.jsx("div",{className:"text-white font-medium mb-2",children:"Políticas"}),t.jsx("div",{className:"text-xs text-gray-300",children:"Envío"}),t.jsx("div",{className:"text-sm text-gray-200 whitespace-pre-wrap",children:((k=y.policy)==null?void 0:k.shipping_text)||"Sin configuración"}),t.jsx("div",{className:"mt-3 text-xs text-gray-300",children:"Devoluciones"}),t.jsx("div",{className:"text-sm text-gray-200 whitespace-pre-wrap",children:((u=y.policy)==null?void 0:u.returns_text)||"Sin configuración"})]})})]}):null};export{ue as PortalContent,je as default};
