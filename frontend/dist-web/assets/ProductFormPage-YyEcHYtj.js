import{c as Pe,r as c,j as e,P as G}from"./index-B0-dYYhW.js";import{S as ze}from"./save-DaQs6UXF.js";import{C as Ue}from"./circle-alert-CLszRJRx.js";import{P as Ge}from"./package-B0XPr4Gt.js";import{P as te}from"./palette-Ce57apDO.js";import{L as re}from"./layers-Cz3Cg7vt.js";import{C as ke}from"./circle-check-CX82dJSv.js";import{F as qe}from"./file-text-B0_F9R2G.js";import{D as We}from"./dollar-sign-_EJxGbDI.js";import{T as Me}from"./tag-DlfPgKEu.js";import{I as Ae}from"./image-CpV40QnQ.js";import{T as q}from"./trash-2-DaeEXlCq.js";import"./vendor-BtP0CW_r.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ke=Pe("arrow-left",Qe);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ze=Pe("upload",Xe),ms=({token:x,apiBase:d,product:m,onCancel:De,onSaved:ae})=>{const[W,ie]=c.useState(""),[F,ne]=c.useState(""),[L,M]=c.useState(""),[oe,Ie]=c.useState([]),[R,le]=c.useState(""),[Q,ce]=c.useState("0"),[K,de]=c.useState(""),[_,me]=c.useState(!0),[D,xe]=c.useState(null),[b,ge]=c.useState({}),[O,S]=c.useState([]),[Ee,ue]=c.useState([]),[X,pe]=c.useState(""),[Z,he]=c.useState("#000000"),[be,fe]=c.useState("0"),[V,I]=c.useState([]),[Te,ye]=c.useState([]),[J,je]=c.useState(""),[Ne,ve]=c.useState("0"),[H,E]=c.useState([]),[Fe,we]=c.useState([]),[Y,Se]=c.useState(""),[$,z]=c.useState("detalles"),[Le,U]=c.useState(!1),p=s=>({Accept:"application/json",...s?{Authorization:`Bearer ${s}`}:{}}),Re=s=>{if(s===""||s==null)return"";const i=Number(s);return Number.isNaN(i)?"":i.toLocaleString("es-CO",{style:"currency",currency:"COP"})},B=s=>{const r=String(s).replace(/[^0-9.,]/g,"").replace(",",".").split(".");return r.length>2?r[0]+"."+r.slice(1).join(""):(r[1]&&(r[1]=r[1].slice(0,2)),r.join("."))},Ce=s=>s?s.startsWith("http://")||s.startsWith("https://")?s:s.startsWith("/")?`${d}${s}`:s.startsWith("media/")?`${d}/${s}`:`${d}/media/${s}`:"",_e=({multiple:s=!1,accept:i="image/*",onFiles:r})=>{const[o,a]=c.useState(!1),n=c.useRef(null),h=()=>{n.current&&n.current.click()},y=w=>{const C=Array.from(w.target.files||[]);r&&r(C)},j=w=>{w.preventDefault(),a(!1);const C=Array.from(w.dataTransfer.files||[]);r&&r(C)},ee=w=>{w.preventDefault(),a(!0)},k=()=>{a(!1)};return e.jsxs("div",{className:`w-full rounded-xl border-2 border-dashed ${o?"border-blue-500 bg-blue-500/10":"border-gray-700 bg-gray-800/50"} p-8 flex flex-col items-center justify-center cursor-pointer transition-all hover:border-blue-500/50 hover:bg-gray-800`,onClick:h,onDrop:j,onDragOver:ee,onDragLeave:k,children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 text-gray-400",children:[e.jsx("div",{className:"p-4 rounded-full bg-gray-800 border border-gray-700",children:e.jsx(Ze,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-300",children:"Haz clic o arrastra imágenes aquí"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Soporta JPG, PNG, WEBP"})]})]}),e.jsx("input",{ref:n,type:"file",accept:i,multiple:s,className:"hidden",onChange:y})]})};c.useEffect(()=>{x&&(async()=>{U(!0);try{const r=await(await fetch(`${d}/products/categories/?page_size=100`,{headers:p(x)})).json(),o=Array.isArray(r.results)?r.results:[];Ie(o),o.length>0&&!L&&M(String(o[0].id))}catch{}finally{U(!1)}})()},[x]),c.useEffect(()=>{(async()=>{if(m){U(!0),ie(m.name||""),ne(String(m.price||"")),M(String(m.category||"")),le(m.sku||""),ce(String(m.inventory_qty||"0")),de(m.description||""),me(!!m.active),xe(null);try{const r=await(await fetch(`${d}/products/${m.id}/colors/`,{headers:p(x)})).json(),o=Array.isArray(r.results)?r.results:r,a=(Array.isArray(o)?o:[]).map((g,P)=>({id:g.id,name:g.name,hex:g.hex,stock:String(g.stock||"0"),position:P,images:[]}));for(let g=0;g<a.length;g++){const P=a[g],T=await(await fetch(`${d}/products/colors/${P.id}/images/`,{headers:p(x)})).json(),t=Array.isArray(T.results)?T.results:T;a[g]={...P,images:(Array.isArray(t)?t:[]).map((u,f)=>({id:u.id,image:u.image,position:f}))}}S(a),ue(a);const h=await(await fetch(`${d}/products/${m.id}/variants/`,{headers:p(x)})).json(),j=(Array.isArray(h.results)?h.results:Array.isArray(h)?h:[]).map(g=>({id:g.id,name:g.name,extra_price:String(g.extra_price||"0"),position:g.position}));I(j),ye(j);const k=await(await fetch(`${d}/products/${m.id}/features/`,{headers:p(x)})).json(),C=(Array.isArray(k.results)?k.results:Array.isArray(k)?k:[]).map(g=>({id:g.id,name:g.name,position:g.position}));E(C),we(C)}catch{S([]),ue([]),I([]),ye([]),E([]),we([])}finally{U(!1)}}})()},[m]);const Oe=()=>{const s={};/^[A-Za-z0-9ÁÉÍÓÚáéíóúÑñ\-\s]{1,100}$/.test(W)||(s.name="Nombre requerido, máx 100 y sin caracteres inválidos.");const r=B(F),o=Number(r);(!r||Number.isNaN(o)||o<=0)&&(s.price="Precio debe ser positivo con 2 decimales."),K.length>500&&(s.description="Descripción máximo 500 caracteres."),oe.find(n=>String(n.id)===String(L))||(s.category="Debe seleccionar una categoría válida."),R&&!/^[A-Za-z0-9\-]{1,50}$/.test(R)&&(s.sku="SKU inválido (alfanumérico y guiones).");const a=Number(Q);return(!Number.isInteger(a)||a<0)&&(s.inventoryQty="Cantidad debe ser entero positivo."),D&&(["image/jpeg","image/png","image/webp"].includes(D.type)||(s.image="Formato de imagen inválido (jpeg, png, webp).")),O.some(n=>!n.name||!/^#[0-9A-Fa-f]{6}$/.test(n.hex)||Number(n.stock)<0||!Number.isInteger(Number(n.stock)))&&(s.colors="Verifique nombre, HEX (#RRGGBB) y stock entero positivo de los colores."),ge(s),Object.keys(s).length===0},Ve=async s=>{if(s.preventDefault(),!Oe())return;const i=new FormData;i.append("name",W),i.append("price",B(F)),i.append("category",L),i.append("sku",R),i.append("inventory_qty",String(Number(Q))),i.append("description",K),i.append("active",_?"true":"false"),D&&i.append("image",D);const r=m?`${d}/products/${m.id}/`:`${d}/products/`,a=await fetch(r,{method:m?"PATCH":"POST",headers:p(x),body:i});let n;try{n=await a.json()}catch{n={detail:`Error inesperado (${a.status} ${a.statusText})`}}if(!a.ok){const h=n.detail||(m?"No se pudo actualizar el producto":"No se pudo crear el producto");ge(y=>({...y,form:h}));return}try{const h=m?m.id:n.id,y=Ee,j=O.map((t,u)=>({...t,position:u})),ee=new Set(y.filter(t=>t.id).map(t=>String(t.id))),k=new Set(j.filter(t=>t.id).map(t=>String(t.id)));for(const t of y)t.id&&!k.has(String(t.id))&&await fetch(`${d}/products/colors/${t.id}/`,{method:"DELETE",headers:p(x)});for(let t of j){if(t.id){const l=y.find(v=>String(v.id)===String(t.id))||{};if(l.name!==t.name||l.hex!==t.hex||String(l.stock)!==String(t.stock)||Number(l.position)!==Number(t.position)){const v=new FormData;v.append("name",t.name),v.append("hex",t.hex),v.append("stock",String(Number(t.stock||0))),v.append("position",String(t.position)),t.id&&await fetch(`${d}/products/colors/${t.id}/`,{method:"PATCH",headers:p(x),body:v})}}else{const l=new FormData;l.append("name",t.name),l.append("hex",t.hex),l.append("stock",String(Number(t.stock||0))),l.append("position",String(t.position));const N=await fetch(`${d}/products/${h}/colors/`,{method:"POST",headers:p(x),body:l}),v=await N.json();N.ok&&v&&v.id&&(t={...t,id:v.id})}if(!t.id)continue;const f=await(await fetch(`${d}/products/colors/${t.id}/images/`,{headers:p(x)})).json(),A=Array.isArray(f.results)?f.results:f,$e=Array.isArray(t.images)?t.images.map((l,N)=>({...l,position:N})):[],Je=new Set((Array.isArray(A)?A:[]).map(l=>String(l.id))),He=new Set($e.filter(l=>l.id).map(l=>String(l.id)));for(const l of Array.isArray(A)?A:[])He.has(String(l.id))||await fetch(`${d}/products/color-images/${l.id}/`,{method:"DELETE",headers:p(x)});for(const l of $e)if(!l.id&&l.file){const N=new FormData;N.append("image",l.file),N.append("position",String(l.position)),await fetch(`${d}/products/colors/${t.id}/images/`,{method:"POST",headers:p(x),body:N})}else if(l.id){const N=new FormData;N.append("position",String(l.position)),await fetch(`${d}/products/color-images/${l.id}/`,{method:"PATCH",headers:p(x),body:N})}}const w=Te,C=V.map((t,u)=>({...t,position:u})),g=new Set(C.filter(t=>t.id).map(t=>String(t.id)));for(const t of w)t.id&&!g.has(String(t.id))&&await fetch(`${d}/products/variants/${t.id}/`,{method:"DELETE",headers:p(x)});for(const t of C){const u=new FormData;if(u.append("name",t.name),u.append("extra_price",String(Number(t.extra_price||0))),u.append("position",String(t.position)),!t.id)await fetch(`${d}/products/${h}/variants/`,{method:"POST",headers:p(x),body:u});else{const f=w.find(A=>String(A.id)===String(t.id));f&&(f.name!==t.name||String(f.extra_price)!==String(t.extra_price)||Number(f.position)!==Number(t.position))&&await fetch(`${d}/products/variants/${t.id}/`,{method:"PATCH",headers:p(x),body:u})}}const P=Fe,se=H.map((t,u)=>({...t,position:u})),T=new Set(se.filter(t=>t.id).map(t=>String(t.id)));for(const t of P)t.id&&!T.has(String(t.id))&&await fetch(`${d}/products/features/${t.id}/`,{method:"DELETE",headers:p(x)});for(const t of se){const u=new FormData;if(u.append("name",t.name),u.append("position",String(t.position)),!t.id)await fetch(`${d}/products/${h}/features/`,{method:"POST",headers:p(x),body:u});else{const f=P.find(A=>String(A.id)===String(t.id));f&&(f.name!==t.name||Number(f.position)!==Number(t.position))&&await fetch(`${d}/products/features/${t.id}/`,{method:"PATCH",headers:p(x),body:u})}}}catch{}ae&&ae()};return e.jsxs("div",{className:"min-h-full bg-gray-900 text-white animate-in fade-in duration-500",children:[Le&&e.jsx("div",{className:"absolute inset-0 z-50 bg-gray-950/50 backdrop-blur-sm flex items-center justify-center",children:e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 shadow-2xl flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin mb-4"}),e.jsx("div",{className:"text-white font-medium",children:"Cargando datos..."})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:De,className:"p-2 rounded-xl bg-gray-800 border border-gray-700 hover:bg-gray-700 text-gray-400 hover:text-white transition-all",children:e.jsx(Ke,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:m?"Editar Producto":"Nuevo Producto"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Complete la información del producto a continuación"})]})]}),e.jsxs("button",{onClick:Ve,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-medium shadow-lg shadow-blue-900/20 transition-all transform hover:scale-[1.02]",children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Guardar Producto"})]})]}),b.form&&e.jsxs("div",{className:"p-4 rounded-xl bg-rose-500/10 border border-rose-500/20 flex items-center gap-3 text-rose-400",children:[e.jsx(Ue,{className:"w-5 h-5 shrink-0"}),e.jsx("span",{children:b.form})]}),e.jsxs("div",{className:"flex items-center gap-1 border-b border-gray-800 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>z("detalles"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${$==="detalles"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Información General"})]}),e.jsxs("button",{onClick:()=>z("colores"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${$==="colores"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Colores"})]}),e.jsxs("button",{onClick:()=>z("variantes"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${$==="variantes"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Variantes"})]}),e.jsxs("button",{onClick:()=>z("caracteristicas"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${$==="caracteristicas"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-white"}`,children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Características"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[$==="detalles"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-gray-400 text-sm font-medium uppercase tracking-wider",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Datos Básicos"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"Nombre del Producto"}),e.jsx("input",{type:"text",value:W,onChange:s=>ie(s.target.value),className:`w-full px-4 py-2.5 bg-gray-800 border ${b.name?"border-rose-500":"border-gray-700"} rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all`,placeholder:"Ej. Camiseta Deportiva Premium"}),b.name&&e.jsx("p",{className:"mt-1 text-xs text-rose-400",children:b.name})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"Precio (COP)"}),e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",value:F,onChange:s=>ne(B(s.target.value)),className:`w-full pl-9 pr-4 py-2.5 bg-gray-800 border ${b.price?"border-rose-500":"border-gray-700"} rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all`,placeholder:"0.00"})]}),e.jsx("p",{className:"mt-1 text-xs text-emerald-400 font-medium",children:Re(F)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"SKU / Código"}),e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",value:R,onChange:s=>le(s.target.value),className:`w-full pl-9 pr-4 py-2.5 bg-gray-800 border ${b.sku?"border-rose-500":"border-gray-700"} rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all`,placeholder:"PROD-001"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"Descripción"}),e.jsx("textarea",{value:K,onChange:s=>de(s.target.value),rows:4,className:`w-full px-4 py-2.5 bg-gray-800 border ${b.description?"border-rose-500":"border-gray-700"} rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all resize-none`,placeholder:"Describe las características principales del producto..."})]})]})]}),e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-gray-400 text-sm font-medium uppercase tracking-wider",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Imagen Principal"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(_e,{accept:"image/*",multiple:!1,onFiles:s=>{const i=s[0];i&&["image/jpeg","image/png","image/webp"].includes(i.type)&&xe(i)}}),b.image&&e.jsx("p",{className:"mt-1 text-xs text-rose-400",children:b.image})]}),e.jsx("div",{children:e.jsx("div",{className:"w-full aspect-square rounded-xl bg-gray-800 border border-gray-700 overflow-hidden flex items-center justify-center relative group",children:D?e.jsx("img",{src:URL.createObjectURL(D),alt:"Preview",className:"w-full h-full object-cover"}):m!=null&&m.image?e.jsx("img",{src:Ce(m.image),alt:"Current",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center text-gray-600",children:[e.jsx(Ae,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("span",{className:"text-xs",children:"Sin imagen"})]})})})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-gray-400 text-sm font-medium uppercase tracking-wider",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Organización"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"Categoría"}),e.jsx("select",{value:L,onChange:s=>M(s.target.value),className:`w-full px-4 py-2.5 bg-gray-800 border ${b.category?"border-rose-500":"border-gray-700"} rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all appearance-none cursor-pointer`,children:oe.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"Inventario Global"}),e.jsx("input",{type:"number",value:Q,onChange:s=>ce(s.target.value),min:0,className:`w-full px-4 py-2.5 bg-gray-800 border ${b.inventoryQty?"border-rose-500":"border-gray-700"} rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all`})]}),e.jsx("div",{className:"pt-4 border-t border-gray-800",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("div",{className:`w-12 h-6 rounded-full p-1 transition-colors duration-200 ease-in-out ${_?"bg-blue-600":"bg-gray-700"}`,children:e.jsx("div",{className:`bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200 ease-in-out ${_?"translate-x-6":"translate-x-0"}`})}),e.jsx("span",{className:"text-sm font-medium text-gray-300 group-hover:text-white transition-colors",children:"Producto Activo"}),e.jsx("input",{type:"checkbox",checked:_,onChange:s=>me(s.target.checked),className:"hidden"})]})})]})]})})]}),$==="colores"&&e.jsx("div",{className:"lg:col-span-3 space-y-6",children:e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 shadow-sm",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm font-medium uppercase tracking-wider",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Gestión de Colores"})]})}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-xl border border-gray-700/50 mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Agregar Nuevo Color"}),e.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Nombre del Color"}),e.jsx("input",{type:"text",value:X,onChange:s=>pe(s.target.value),placeholder:"Ej. Rojo Pasión",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-white focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"w-24",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Color"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"color",value:Z,onChange:s=>he(s.target.value),className:"h-9 w-full rounded cursor-pointer bg-transparent"})})]}),e.jsxs("div",{className:"w-32",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Stock"}),e.jsx("input",{type:"number",value:be,onChange:s=>fe(s.target.value),min:0,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-white focus:border-blue-500 focus:outline-none"})]}),e.jsxs("button",{type:"button",onClick:()=>{!X||!/^#[0-9A-Fa-f]{6}$/.test(Z)||(S(s=>[...s,{name:X,hex:Z,stock:be}]),pe(""),he("#000000"),fe("0"))},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:"Agregar"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[O.map((s,i)=>e.jsxs("div",{className:"bg-gray-800/30 border border-gray-700 rounded-xl p-4 transition-all hover:border-gray-600",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4 pb-4 border-b border-gray-700/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg shadow-sm border border-gray-600",style:{backgroundColor:s.hex}}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx("input",{type:"text",value:s.name,onChange:r=>S(o=>o.map((a,n)=>n===i?{...a,name:r.target.value}:a)),className:"px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-sm text-white focus:border-blue-500 focus:outline-none"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Hex:"}),e.jsx("input",{type:"text",value:s.hex,onChange:r=>S(o=>o.map((a,n)=>n===i?{...a,hex:r.target.value}:a)),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-sm text-white focus:border-blue-500 focus:outline-none font-mono"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Stock:"}),e.jsx("input",{type:"number",value:s.stock,onChange:r=>S(o=>o.map((a,n)=>n===i?{...a,stock:r.target.value}:a)),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-sm text-white focus:border-blue-500 focus:outline-none"})]})]}),e.jsx("button",{type:"button",onClick:()=>S(r=>r.filter((o,a)=>a!==i)),className:"p-2 text-gray-400 hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-colors",children:e.jsx(q,{className:"w-5 h-5"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Imágenes de la Variante (Máx 4)"}),e.jsx("div",{className:"w-48",children:e.jsxs("label",{className:"flex items-center justify-center px-3 py-1.5 bg-gray-800 border border-gray-700 rounded-lg text-xs text-gray-300 hover:text-white hover:border-gray-500 cursor-pointer transition-all",children:[e.jsx(G,{className:"w-3 h-3 mr-1.5"}),"Agregar Imágenes",e.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:r=>{const o=Array.from(r.target.files||[]);S(a=>a.map((n,h)=>{if(h!==i)return n;const y=Array.isArray(n.images)?n.images.slice():[];for(const j of o){if(y.length>=4)break;["image/jpeg","image/png","image/webp"].includes(j.type)&&y.push({file:j,preview:URL.createObjectURL(j)})}return{...n,images:y}}))}})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-3",children:[(s.images||[]).map((r,o)=>e.jsxs("div",{className:"relative group aspect-square rounded-lg bg-gray-900 border border-gray-700 overflow-hidden",children:[e.jsx("img",{src:r.preview?r.preview:Ce(r.image),alt:"Color variant",className:"w-full h-full object-cover transition-transform group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:()=>S(a=>a.map((n,h)=>h===i?{...n,images:(n.images||[]).filter((y,j)=>j!==o)}:n)),className:"p-1.5 bg-rose-500 text-white rounded-full hover:bg-rose-600 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})})]},`img-${o}`)),(!s.images||s.images.length===0)&&e.jsx("div",{className:"col-span-full py-4 text-center text-gray-500 text-xs border border-dashed border-gray-800 rounded-lg",children:"No hay imágenes para este color"})]})]})]},`${s.id||"new"}-${i}`)),O.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(te,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"No hay variantes de color agregadas."})]})]}),b.colors&&e.jsx("p",{className:"mt-3 text-sm text-rose-400",children:b.colors})]})}),$==="variantes"&&e.jsx("div",{className:"lg:col-span-3 space-y-6",children:e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-gray-400 text-sm font-medium uppercase tracking-wider",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Variantes de Producto (Talla, Material, etc.)"})]}),e.jsx("div",{className:"p-4 bg-gray-800/50 rounded-xl border border-gray-700/50 mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Nombre (ej. Talla L, XL)"}),e.jsx("input",{type:"text",value:J,onChange:s=>je(s.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-white focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"w-32",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Sobrecosto"}),e.jsx("input",{type:"number",value:Ne,onChange:s=>ve(s.target.value),min:0,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-white focus:border-blue-500 focus:outline-none"})]}),e.jsxs("button",{type:"button",onClick:()=>{J&&(I([...V,{name:J,extra_price:Ne}]),je(""),ve("0"))},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:"Agregar"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[V.map((s,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/30 border border-gray-700 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-4 flex-1",children:e.jsx("input",{type:"text",value:s.name,onChange:r=>I(o=>o.map((a,n)=>n===i?{...a,name:r.target.value}:a)),className:"bg-transparent border-none text-white focus:ring-0 p-0 text-sm font-medium w-full"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"+$"}),e.jsx("input",{type:"number",value:s.extra_price,onChange:r=>I(o=>o.map((a,n)=>n===i?{...a,extra_price:r.target.value}:a)),className:"w-24 bg-gray-900 border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-blue-500 focus:outline-none text-right"})]}),e.jsx("button",{onClick:()=>I(r=>r.filter((o,a)=>a!==i)),className:"text-gray-400 hover:text-rose-400 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})]})]},i)),V.length===0&&e.jsx("p",{className:"text-center text-gray-500 text-sm py-4",children:"No hay variantes definidas."})]})]})}),$==="caracteristicas"&&e.jsx("div",{className:"lg:col-span-3 space-y-6",children:e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-gray-400 text-sm font-medium uppercase tracking-wider",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Características del Producto"})]}),e.jsx("div",{className:"p-4 bg-gray-800/50 rounded-xl border border-gray-700/50 mb-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Característica"}),e.jsx("input",{type:"text",value:Y,onChange:s=>Se(s.target.value),placeholder:"Ej. Resistente al agua",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm text-white focus:border-blue-500 focus:outline-none"})]}),e.jsxs("button",{type:"button",onClick:()=>{Y&&(E([...H,{name:Y}]),Se(""))},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2 h-[38px] self-end",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:"Agregar"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[H.map((s,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/30 border border-gray-700 rounded-lg",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:s.name,onChange:r=>E(o=>o.map((a,n)=>n===i?{...a,name:r.target.value}:a)),className:"bg-transparent border-none text-white focus:ring-0 p-0 text-sm w-full"})}),e.jsx("button",{onClick:()=>E(r=>r.filter((o,a)=>a!==i)),className:"text-gray-400 hover:text-rose-400 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})]},i)),H.length===0&&e.jsx("p",{className:"text-center text-gray-500 text-sm py-4",children:"No hay características definidas."})]})]})})]})]})]})};export{ms as default};
