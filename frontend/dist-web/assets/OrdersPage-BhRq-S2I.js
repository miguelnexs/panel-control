import{r as n,j as e,e as he,C as ue,T as pe,S as be,R as ye,X as V,U as fe}from"./index-B0-dYYhW.js";import{S as k}from"./shopping-bag-DP9oZeIa.js";import{D as Y}from"./dollar-sign-_EJxGbDI.js";import{C as je}from"./calendar-rwhgey3Q.js";import{P as $}from"./package-B0XPr4Gt.js";import{P as J}from"./printer-Bz1GJUXl.js";import{E as ve}from"./eye-BOztA-m_.js";import"./vendor-BtP0CW_r.js";const ke=({token:h,apiBase:b})=>{var q,A,F,U;const[g,K]=n.useState([]),[d,X]=n.useState({company_name:"",company_nit:"",company_phone:"",company_address:"",logo:null,printer_type:"system",paper_width_mm:58,receipt_footer:"",primary_color:"#0ea5e9"}),[i,B]=n.useState({show_logo:!0,header1:"",header2:"",align:"center",font_size:11,margin_top:10,margin_bottom:10,show_qr:!1,logo_mode:"company",logo_url:"",logo_width_mm:45}),[y,f]=n.useState(1),[u,G]=n.useState(10),[p,Q]=n.useState(0),[j,z]=n.useState(null),[l,P]=n.useState(null),[Z,L]=n.useState(!1),[v,ee]=n.useState(""),[N,te]=n.useState("all"),[w,O]=n.useState(null),D=t=>({...t?{Authorization:`Bearer ${t}`}:{}}),se=async()=>{try{const t=await fetch(`${b}/webconfig/settings/`,{headers:D(h)}),s=await t.json();if(!t.ok)return;const a={company_name:s.company_name||"",company_nit:s.company_nit||"",company_phone:s.company_phone||"",company_address:s.company_address||"",logo:s.logo||null,printer_type:s.printer_type||"system",paper_width_mm:s.paper_width_mm||58,receipt_footer:s.receipt_footer||"",primary_color:s.primary_color||"#0ea5e9"};try{const c=s.receipt_footer||"",r=typeof c=="string"?JSON.parse(c):null;r&&typeof r=="object"&&(B({show_logo:r.show_logo!==!1,header1:r.header1||"",header2:r.header2||"",align:r.align||"center",font_size:Number(r.font_size||11),margin_top:Number(r.margins&&r.margins.top||r.margin_top||10),margin_bottom:Number(r.margins&&r.margins.bottom||r.margin_bottom||10),show_qr:!!r.show_qr,logo_mode:r.logo_mode||"company",logo_url:r.logo_url||"",logo_width_mm:Number(r.logo_width_mm||45)}),a.receipt_footer=r.message!==void 0?r.message:"")}catch{}X(a)}catch(t){console.error("Error loading settings",t)}};n.useEffect(()=>{h&&se()},[h]);const M=t=>{var W;const s=d.paper_width_mm||58,a=d.primary_color||"#000",c=d.company_name||"Mi Tienda",r=d.company_nit?`NIT: ${d.company_nit}`:"",m=d.company_address||"",x=d.company_phone||"",le=d.logo||"",ie=o=>{try{return o?String(o).startsWith("http://")||String(o).startsWith("https://")?o:String(o).startsWith("/")?`${b}${o}`:`${b}/${o}`:""}catch{return o}},S=i.logo_mode==="custom"&&i.logo_url?i.logo_url:le,ne=i.show_logo&&S?`<div class="c"><img src="${S.startsWith("http")?S:ie(S)}" style="width:${Number(i.logo_width_mm||45)}mm;height:auto;object-fit:contain"/></div>`:"",H=i.align==="left"?"l":i.align==="right"?"r":"c",oe=`*{box-sizing:border-box} body{font-family:Arial, sans-serif;margin:0;padding:${Number(i.margin_top||10)}px 10px ${Number(i.margin_bottom||10)}px;width:${s}mm} .c{text-align:center} .l{text-align:left} .r{text-align:right} .t{font-weight:600} .hr{height:1px;background:linear-gradient(90deg, ${a}, transparent);margin:6px 0} .row{display:flex;justify-content:space-between;gap:6px} .tab{width:100%;border-collapse:collapse} .tab th,.tab td{padding:4px 0;font-size:${Number(i.font_size||11)}px} .tab thead th{border-bottom:1px dashed #999;text-align:left} .tab tfoot td{border-top:1px dashed #999} .small{font-size:${Math.max(9,Number(i.font_size||11)-2)}px}`,ce=(t.items||[]).map(o=>{var I;return`<tr><td>${((I=o.product)==null?void 0:I.name)||"Item"}</td><td class="c">${o.quantity}</td><td class="r">${Number(o.unit_price).toLocaleString("es-CO",{style:"currency",currency:"COP"})}</td><td class="r">${Number(o.line_total).toLocaleString("es-CO",{style:"currency",currency:"COP"})}</td></tr>`}).join(""),de=`
      ${ne}
      <div class="${H}">
        <div class="t">${c}</div>
        <div class="small">${r}</div>
        <div class="small">${m}</div>
        <div class="small">${x}</div>
        ${i.header1?`<div class="small">${i.header1}</div>`:""}
        ${i.header2?`<div class="small">${i.header2}</div>`:""}
      </div>
      <div class="hr"></div>
      <div class="row small"><div>Orden: ${t.order_number}</div><div>${new Date(t.created_at).toLocaleString()}</div></div>
      <div class="row small"><div>Cliente: ${((W=t.client)==null?void 0:W.full_name)||"Ocasional"}</div><div></div></div>
    `,me=`
      <table class="tab">
        <thead><tr><th>Producto</th><th class="c">Cant</th><th class="r">Unit</th><th class="r">Total</th></tr></thead>
        <tbody>${ce}</tbody>
        <tfoot><tr><td colspan="3" class="t">Total</td><td class="r t">${Number(t.total_amount).toLocaleString("es-CO",{style:"currency",currency:"COP"})}</td></tr></tfoot>
      </table>
    `,xe=i.show_qr?`<div class="c"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(t.order_number)}" style="width:35mm;height:35mm;object-fit:contain"/></div>`:"",ge=`<div class="hr"></div><div class="${H} small">${d.receipt_footer||""}</div>${xe}`;return`<!doctype html><html><head><meta charset="utf-8"><title>Recibo ${t.order_number}</title><style>${oe}</style></head><body>${de}${me}${ge}</body></html>`},re=()=>{if(!w)return;const t=M(w),s=window.open("","","height=600,width=400");s&&(s.document.write(t),s.document.close(),s.focus())},E=async()=>{L(!0),z(null);try{const t=new URLSearchParams({page:String(y),page_size:String(u)});v&&t.set("search",v),N!=="all"&&t.set("status",N);const s=await fetch(`${b}/sales/list/?${t.toString()}`,{headers:D(h)}),a=await s.json();if(!s.ok)throw new Error(a.detail||"Error al cargar pedidos");K(Array.isArray(a.results)?a.results:[]),Q(Number(a.count||0))}catch(t){z({type:"error",text:t.message})}finally{L(!1)}};n.useEffect(()=>{h&&E()},[h,y,u,v,N]);const _=n.useMemo(()=>{const t=p,s=g.reduce((m,x)=>m+Number(x.total_amount||0),0),a=new Date,c=g.filter(m=>{const x=new Date(m.created_at);return x.getFullYear()===a.getFullYear()&&x.getMonth()===a.getMonth()&&x.getDate()===a.getDate()}).length,r=g.filter(m=>m.status==="pending").length;return{totalOrders:t,amountSum:s,todayCount:c,pendingCount:r}},[g,p]),C=({label:t,value:s,icon:a,color:c,subValue:r})=>e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-4 flex items-center justify-between shadow-sm hover:border-gray-700 transition-all group",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs font-medium uppercase tracking-wider mb-1",children:t}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-white group-hover:scale-105 transition-transform origin-left",children:s}),r&&e.jsx("span",{className:"text-xs text-gray-500",children:r})]})]}),e.jsx("div",{className:`p-3 rounded-lg bg-opacity-10 ${c.bg}`,children:e.jsx(a,{className:`w-6 h-6 ${c.text}`})})]}),T=(t="pending")=>{switch(t.toLowerCase()){case"completed":case"delivered":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/20";case"pending":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"cancelled":return"bg-rose-500/10 text-rose-400 border-rose-500/20";case"processing":return"bg-blue-500/10 text-blue-400 border-blue-500/20";default:return"bg-gray-700 text-gray-300 border-gray-600"}},R=(t="pending")=>{switch(t.toLowerCase()){case"completed":case"delivered":return"Entregado";case"pending":return"Pendiente";case"cancelled":return"Cancelado";case"processing":return"Procesando";default:return t}},ae=t=>t?t.startsWith("http")?t:`${b}${t.startsWith("/")?"":"/"}${t}`:"";return e.jsxs("div",{className:"space-y-6 relative animate-in fade-in duration-500",children:[Z&&!g.length&&e.jsx("div",{className:"absolute inset-0 z-50 bg-gray-950/50 backdrop-blur-sm flex items-center justify-center rounded-2xl",children:e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 shadow-2xl flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin mb-4"}),e.jsx("div",{className:"text-white font-medium",children:"Cargando pedidos..."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(C,{label:"Total Pedidos",value:_.totalOrders,icon:k,color:{bg:"bg-blue-500",text:"text-blue-500"}}),e.jsx(C,{label:"Ventas Totales",value:_.amountSum.toLocaleString("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}),icon:Y,color:{bg:"bg-emerald-500",text:"text-emerald-500"}}),e.jsx(C,{label:"Pedidos Hoy",value:_.todayCount,icon:je,color:{bg:"bg-indigo-500",text:"text-indigo-500"}}),e.jsx(C,{label:"Pendientes",value:_.pendingCount,icon:he,color:{bg:"bg-amber-500",text:"text-amber-500"}})]}),j&&e.jsxs("div",{className:`p-4 rounded-xl text-sm flex items-center gap-3 border ${j.type==="success"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-rose-500/10 text-rose-400 border-rose-500/20"}`,children:[j.type==="success"?e.jsx(ue,{size:18}):e.jsx(pe,{size:18}),j.text]}),e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-5 border-b border-gray-800 flex flex-col xl:flex-row xl:items-center justify-between gap-4 bg-gray-900/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg",children:e.jsx($,{className:"w-5 h-5 text-indigo-500"})}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Historial de Pedidos"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 group-focus-within:text-blue-500 transition-colors"}),e.jsx("input",{type:"text",value:v,onChange:t=>{f(1),ee(t.target.value)},placeholder:"Buscar pedido o cliente...",className:"pl-9 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-xl text-sm text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all w-full md:w-64"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs("select",{value:N,onChange:t=>{f(1),te(t.target.value)},className:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-xl text-sm text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50 cursor-pointer",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"pending",children:"Pendiente"}),e.jsx("option",{value:"processing",children:"Procesando"}),e.jsx("option",{value:"delivered",children:"Entregado"}),e.jsx("option",{value:"cancelled",children:"Cancelado"})]})}),e.jsx("div",{className:"flex items-center gap-2 border-l border-gray-800 pl-2 ml-2",children:e.jsx("button",{onClick:E,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",title:"Recargar",children:e.jsx(ye,{className:"w-4 h-4"})})})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-800 bg-gray-800/30",children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Pedido"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider text-right",children:"Acciones"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-800",children:[g.map(t=>{var s;return e.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-800 border border-gray-700",children:e.jsx(k,{className:"w-4 h-4 text-indigo-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-mono text-sm font-medium text-white group-hover:text-indigo-400 transition-colors",children:["#",t.order_number]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.items_count," items"]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-300 font-medium",children:((s=t.client)==null?void 0:s.full_name)||"Cliente Ocasional"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm font-bold text-white",children:Number(t.total_amount).toLocaleString("es-CO",{style:"currency",currency:"COP"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${T(t.status)}`,children:R(t.status)})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-400",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("div",{className:"text-xs text-gray-600",children:new Date(t.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>O(t),className:"p-2 rounded-lg hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",title:"Imprimir Recibo",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>P(t),className:"p-2 rounded-lg hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",title:"Ver detalles",children:e.jsx(ve,{className:"w-4 h-4"})})]})})]},t.id)}),g.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx($,{className:"w-12 h-12 mb-3 opacity-20"}),e.jsx("p",{children:"No se encontraron pedidos"})]})})})]})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-800 flex items-center justify-between bg-gray-900/50",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["Mostrando ",g.length," de ",p," pedidos"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>f(t=>Math.max(1,t-1)),disabled:y===1,className:"px-3 py-1.5 rounded-lg bg-gray-800 border border-gray-700 text-gray-300 text-sm hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Anterior"}),e.jsxs("span",{className:"text-sm text-gray-300 px-2",children:["Página ",y," de ",Math.max(1,Math.ceil(p/u))]}),e.jsx("button",{onClick:()=>f(t=>Math.min(Math.max(1,Math.ceil(p/u)),t+1)),disabled:y===Math.max(1,Math.ceil(p/u)),className:"px-3 py-1.5 rounded-lg bg-gray-800 border border-gray-700 text-gray-300 text-sm hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Siguiente"}),e.jsx("select",{value:u,onChange:t=>{G(Number(t.target.value)),f(1)},className:"px-2 py-1.5 rounded-lg bg-gray-800 border border-gray-700 text-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/50",children:[10,20,50].map(t=>e.jsxs("option",{value:t,children:[t,"/página"]},t))})]})]})]}),l&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl w-full max-w-4xl shadow-2xl scale-100 animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg",children:e.jsx(k,{className:"w-5 h-5 text-indigo-500"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Pedido #",l.order_number]}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(l.created_at).toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${T(l.status)}`,children:R(l.status)}),e.jsx("button",{onClick:()=>P(null),className:"text-gray-500 hover:text-white transition-colors",children:e.jsx(V,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"col-span-1 space-y-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-5 border border-gray-700",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4 text-indigo-400"})," Datos del Cliente"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Nombre"}),e.jsx("div",{className:"text-white font-medium",children:((q=l.client)==null?void 0:q.full_name)||"Cliente Ocasional"})]}),((A=l.client)==null?void 0:A.email)&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("div",{className:"text-gray-300 text-sm truncate",children:l.client.email})]}),((F=l.client)==null?void 0:F.cedula)&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Documento"}),e.jsx("div",{className:"text-gray-300 text-sm",children:l.client.cedula})]}),((U=l.client)==null?void 0:U.address)&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Dirección"}),e.jsx("div",{className:"text-gray-300 text-sm",children:l.client.address})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-5 border border-gray-700",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4 text-emerald-400"})," Resumen Financiero"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Subtotal"}),e.jsx("span",{className:"text-white",children:Number(l.total_amount).toLocaleString("es-CO",{style:"currency",currency:"COP"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Envío"}),e.jsx("span",{className:"text-white",children:"$0"})]}),e.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-700 flex items-center justify-between",children:[e.jsx("span",{className:"font-bold text-white",children:"Total"}),e.jsx("span",{className:"font-bold text-emerald-400 text-lg",children:Number(l.total_amount).toLocaleString("es-CO",{style:"currency",currency:"COP"})})]})]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-indigo-400"})," Items del Pedido (",l.items_count,")"]}),e.jsxs("div",{className:"space-y-3",children:[(l.items||[]).map((t,s)=>{var a,c,r,m,x;return e.jsxs("div",{className:"bg-gray-800/30 border border-gray-700 rounded-xl p-3 flex gap-4 hover:border-gray-600 transition-colors",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gray-800 border border-gray-700 overflow-hidden shrink-0",children:(a=t.product)!=null&&a.image?e.jsx("img",{src:ae(t.product.image),alt:(c=t.product)==null?void 0:c.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:e.jsx($,{className:"w-8 h-8 opacity-50"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-white font-medium truncate pr-2",children:((r=t.product)==null?void 0:r.name)||"Producto eliminado"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",((m=t.product)==null?void 0:m.sku)||"N/A"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white font-bold text-sm",children:Number(t.line_total).toLocaleString("es-CO",{style:"currency",currency:"COP"})}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.quantity," x ",Number(t.unit_price).toLocaleString("es-CO",{style:"currency",currency:"COP"})]})]})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[t.color&&e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-md bg-gray-800 text-xs text-gray-300 border border-gray-700",children:[e.jsx("span",{className:"w-3 h-3 rounded-full border border-gray-600",style:{backgroundColor:t.color.hex}}),t.color.name]}),((x=t.product)==null?void 0:x.category_name)&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-gray-800 text-xs text-gray-300 border border-gray-700",children:t.product.category_name})]})]})]},s)}),(l.items||[]).length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-800/30 rounded-xl border border-dashed border-gray-700",children:"No hay items en este pedido"})]})]})]})}),e.jsx("div",{className:"p-4 border-t border-gray-800 bg-gray-900/50 rounded-b-2xl flex justify-end gap-3",children:e.jsx("button",{onClick:()=>P(null),className:"px-6 py-2.5 rounded-xl bg-gray-800 hover:bg-gray-700 text-white font-medium transition-colors",children:"Cerrar"})})]})}),w&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 bg-gray-100 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"Vista Previa del Recibo"}),e.jsx("button",{onClick:()=>O(null),className:"text-gray-500 hover:text-gray-800",children:e.jsx(V,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-hidden bg-gray-200 flex justify-center p-4",children:e.jsx("div",{className:"shadow-lg bg-white overflow-hidden",style:{width:`${d.paper_width_mm||58}mm`,maxHeight:"100%",overflowY:"auto"},children:e.jsx("iframe",{srcDoc:M(w),className:"w-full h-full border-none bg-white",title:"Receipt Preview",style:{minHeight:"400px"}})})}),e.jsxs("div",{className:"p-4 border-t bg-gray-50 flex gap-3",children:[e.jsxs("button",{onClick:re,className:"flex-1 bg-gray-900 text-white py-2 rounded-lg font-medium hover:bg-gray-800 transition-colors flex items-center justify-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"})," Imprimir"]}),e.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"Cerrar"})]})]})})]})};export{ke as default};
