import{c as T,r as x,j as e,R as oe,U as L,B as O,M as W,h as G,i as le,X as ne}from"./index-B0-dYYhW.js";import{P as J}from"./printer-Bz1GJUXl.js";import{C as ie}from"./circle-check-CX82dJSv.js";import{C as de}from"./circle-alert-CLszRJRx.js";import{S as I}from"./save-DaQs6UXF.js";import{S as ce}from"./smartphone-DXaUyE_3.js";import{M as me}from"./map-pin-Dp4W-hb_.js";import{P as pe}from"./palette-Ce57apDO.js";import{I as V}from"./image-CpV40QnQ.js";import{F as ge}from"./file-text-B0_F9R2G.js";import"./vendor-BtP0CW_r.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],ue=T("align-center",xe);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],ye=T("qr-code",he);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Q=T("type",fe),Me=({token:u,apiBase:h})=>{const w=(r,a=!0)=>({...a?{"Content-Type":"application/json"}:{},...r?{Authorization:`Bearer ${r}`}:{}}),[y,X]=x.useState("datos"),[k,z]=x.useState(!1),[b,N]=x.useState(!1),[$,p]=x.useState(null),[i,D]=x.useState({username:"",first_name:"",last_name:"",email:"",phone:"",department:"",position:""}),[s,_]=x.useState({company_name:"",company_nit:"",company_phone:"",company_whatsapp:"",company_email:"",company_address:"",company_description:"",primary_color:"#0ea5e9",secondary_color:"#1f2937",logo:null}),[S,A]=x.useState(null),[R,M]=x.useState(null),[t,m]=x.useState({show_logo:!0,header1:"",header2:"",align:"center",font_size:11,margin_top:10,margin_bottom:10,show_qr:!1,logo_mode:"company",logo_url:"",logo_width_mm:45}),U=async()=>{z(!0),p(null);try{const r=await fetch(`${h}/users/api/auth/me/`,{headers:w(u)}),a=await r.json();if(!r.ok)throw new Error(a.detail||"No se pudo cargar el perfil");D({username:a.username||"",first_name:a.first_name||"",last_name:a.last_name||"",email:a.email||"",phone:a.phone||"",department:a.department||"",position:a.position||""})}catch(r){p({type:"error",text:r.message})}finally{z(!1)}};x.useEffect(()=>{u&&U()},[u]);const j=r=>{const{name:a,value:n}=r.target;D(o=>({...o,[a]:n}))},Y=async r=>{r&&r.preventDefault(),N(!0),p(null);try{const a={first_name:i.first_name,last_name:i.last_name,email:i.email,phone:i.phone,department:i.department,position:i.position},n=await fetch(`${h}/users/api/auth/me/`,{method:"PATCH",headers:w(u),body:JSON.stringify(a)}),o=await n.json();if(!n.ok)throw new Error(o.detail||"No se pudo guardar");p({type:"success",text:"Datos personales actualizados correctamente"})}catch(a){p({type:"error",text:a.message})}finally{N(!1)}},K=r=>{try{return r?typeof r=="string"&&(r.startsWith("http://")||r.startsWith("https://"))?r:typeof r=="string"&&r.startsWith("/")?`${h}${r}`:`${h}/${r}`:""}catch{return r}},F=async()=>{z(!0),p(null);try{const r=await fetch(`${h}/webconfig/settings/`,{headers:w(u)}),a=await r.json();if(!r.ok)throw new Error(a.detail||"No se pudieron cargar configuraciones");_({company_name:a.company_name||"",company_nit:a.company_nit||"",company_phone:a.company_phone||"",company_whatsapp:a.company_whatsapp||"",company_email:a.company_email||"",company_address:a.company_address||"",company_description:a.company_description||"",primary_color:a.primary_color||"#0ea5e9",secondary_color:a.secondary_color||"#1f2937",logo:a.logo||null,printer_type:a.printer_type||"system",printer_name:a.printer_name||"",paper_width_mm:a.paper_width_mm||58,auto_print:!!a.auto_print,receipt_footer:a.receipt_footer||""});try{const n=a.receipt_footer||"",o=typeof n=="string"?JSON.parse(n):null;o&&typeof o=="object"?(m({show_logo:o.show_logo!==!1,header1:o.header1||"",header2:o.header2||"",align:o.align||"center",font_size:Number(o.font_size||11),margin_top:Number(o.margins&&o.margins.top||o.margin_top||10),margin_bottom:Number(o.margins&&o.margins.bottom||o.margin_bottom||10),show_qr:!!o.show_qr,logo_mode:o.logo_mode||"company",logo_url:o.logo_url||"",logo_width_mm:Number(o.logo_width_mm||45)}),_(l=>({...l,receipt_footer:o.message||l.receipt_footer||""}))):m(l=>({...l}))}catch{m(n=>({...n}))}}catch(r){p({type:"error",text:r.message})}finally{z(!1)}};x.useEffect(()=>{u&&(y==="empresa"||y==="impresora")&&F()},[u,y]);const d=r=>{const{name:a,value:n}=r.target;_(o=>({...o,[a]:n}))},Z=r=>{const a=r.target.files&&r.target.files[0];A(a||null)},H=async r=>{r&&r.preventDefault(),N(!0),p(null);try{if(y==="impresora"){const l={printer_type:s.printer_type||"system",printer_name:s.printer_name||"",paper_width_mm:Number(s.paper_width_mm||58),auto_print:!!s.auto_print},E={message:s.receipt_footer||"",show_logo:!!t.show_logo,header1:t.header1||"",header2:t.header2||"",align:t.align||"center",font_size:Number(t.font_size||11),margins:{top:Number(t.margin_top||10),bottom:Number(t.margin_bottom||10)},show_qr:!!t.show_qr,logo_mode:t.logo_mode||"company",logo_url:t.logo_url||"",logo_width_mm:Number(t.logo_width_mm||45)},q={...l,receipt_footer:JSON.stringify(E)},P=await fetch(`${h}/webconfig/settings/`,{method:"PUT",headers:w(u,!0),body:JSON.stringify(q)}),g=await P.json();if(!P.ok)throw new Error(g.detail||"No se pudieron guardar cambios");p({type:"success",text:"Configuración de impresora guardada"}),_(f=>({...f,printer_type:g.printer_type??f.printer_type,printer_name:g.printer_name??f.printer_name,paper_width_mm:g.paper_width_mm??f.paper_width_mm,auto_print:g.auto_print??f.auto_print,receipt_footer:(()=>{try{const v=g.receipt_footer,C=typeof v=="string"?JSON.parse(v):null;return C&&C.message?C.message:f.receipt_footer}catch{return f.receipt_footer}})()})),N(!1);return}const a=new FormData;a.append("company_name",s.company_name||""),a.append("company_nit",s.company_nit||""),a.append("company_phone",s.company_phone||""),a.append("company_whatsapp",s.company_whatsapp||""),a.append("company_email",s.company_email||""),a.append("company_address",s.company_address||""),a.append("company_description",s.company_description||""),a.append("primary_color",s.primary_color||""),a.append("secondary_color",s.secondary_color||""),S&&a.append("logo",S);const n=await fetch(`${h}/webconfig/settings/`,{method:"PUT",headers:w(u,!1),body:a}),o=await n.json();if(!n.ok)throw new Error(o.detail||"No se pudieron guardar cambios");p({type:"success",text:"Identidad de empresa guardada"}),A(null),_(l=>({...l,logo:o.logo||l.logo,company_name:o.company_name||l.company_name,company_nit:o.company_nit||l.company_nit,company_phone:o.company_phone||l.company_phone,company_whatsapp:o.company_whatsapp||l.company_whatsapp,company_email:o.company_email||l.company_email,company_address:o.company_address||l.company_address,company_description:o.company_description||l.company_description,primary_color:o.primary_color||l.primary_color,secondary_color:o.secondary_color||l.secondary_color}))}catch(a){p({type:"error",text:a.message})}finally{N(!1)}},B=()=>{try{const r=Number(s.paper_width_mm||58),a=s.primary_color||"#000",n=s.company_name||"Mi Empresa",o=s.company_nit||"900.000.000",l=s.company_address||"Dirección Principal",E=s.company_phone||"300 000 0000",q=s.logo||"",P=c=>{try{return c?String(c).startsWith("http://")||String(c).startsWith("https://")?c:String(c).startsWith("/")?`${h}${c}`:`${h}/${c}`:""}catch{return c}},g=t.logo_mode==="custom"&&t.logo_url?t.logo_url:q,f=t.show_logo&&g?`<div class="c"><img src="${g.startsWith("http")?g:P(g)}" style="width:${Number(t.logo_width_mm||45)}mm;height:auto;object-fit:contain"/></div>`:"",v=t.align==="left"?"l":t.align==="right"?"r":"c",C=`*{box-sizing:border-box} body{font-family:Arial, sans-serif;margin:0;padding:${Number(t.margin_top||10)}px 10px ${Number(t.margin_bottom||10)}px;width:${r}mm} .c{text-align:center} .l{text-align:left} .r{text-align:right} .t{font-weight:600} .hr{height:1px;background:linear-gradient(90deg, ${a}, transparent);margin:6px 0} .row{display:flex;justify-content:space-between;gap:6px} .tab{width:100%;border-collapse:collapse} .tab th,.tab td{padding:4px 0;font-size:${Number(t.font_size||11)}px} .tab thead th{border-bottom:1px dashed #999;text-align:left} .tab tfoot td{border-top:1px dashed #999} .small{font-size:${Math.max(9,Number(t.font_size||11)-2)}px}`,ee=`
        ${f}
        <div class="${v}">
          <div class="t">${n}</div>
          <div class="small">${o}</div>
          <div class="small">${l}</div>
          <div class="small">${E}</div>
          ${t.header1?`<div class="small">${t.header1}</div>`:""}
          ${t.header2?`<div class="small">${t.header2}</div>`:""}
        </div>
        <div class="hr"></div>
        <div class="row small"><div>Orden: DEMO-0001</div><div>${new Date().toLocaleString()}</div></div>
        <div class="row small"><div>Cliente: Juan Pérez</div><div></div></div>
      `,ae=`
        <table class="tab">
          <thead><tr><th>Producto</th><th class="c">Cant</th><th class="r">Unit</th><th class="r">Total</th></tr></thead>
          <tbody>${[{name:"Producto A",qty:2,unit:15e3,line:3e4},{name:"Producto B",qty:1,unit:45e3,line:45e3}].map(c=>`<tr><td>${c.name}</td><td class="c">${c.qty}</td><td class="r">${c.unit.toLocaleString("es-CO",{style:"currency",currency:"COP"})}</td><td class="r">${c.line.toLocaleString("es-CO",{style:"currency",currency:"COP"})}</td></tr>`).join("")}</tbody>
          <tfoot><tr><td colspan="3" class="t">Total</td><td class="r t">${75e3.toLocaleString("es-CO",{style:"currency",currency:"COP"})}</td></tr></tfoot>
        </table>
      `,re=t.show_qr?`<div class="c"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent("DEMO-0001")}" style="width:35mm;height:35mm;object-fit:contain"/></div>`:"",se=`<div class="hr"></div><div class="${v} small">${s.receipt_footer||""}</div>${re}`,te=`<!doctype html><html><head><meta charset="utf-8"><title>Recibo</title><style>${C}</style></head><body>${ee}${ae}${se}</body></html>`;M(te)}catch{}};return e.jsxs("div",{className:"space-y-6 animate-fade-in max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 border-b border-gray-800 pb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Configuración del Sistema"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Gestiona tu perfil, la identidad de tu empresa y preferencias de impresión"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:y==="datos"?()=>U():F,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white transition-colors border border-gray-700",disabled:k,children:[e.jsx(oe,{size:18,className:k?"animate-spin":""}),e.jsx("span",{className:"text-sm font-medium",children:k?"Cargando...":"Recargar"})]})})]}),e.jsx("div",{className:"flex p-1 bg-gray-900/60 rounded-xl border border-gray-800 w-full md:w-fit overflow-x-auto",children:[{id:"datos",label:"Datos Personales",icon:L},{id:"empresa",label:"Empresa",icon:O},{id:"impresora",label:"Impresora",icon:J}].map(r=>e.jsxs("button",{onClick:()=>X(r.id),className:`
              flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-medium transition-all whitespace-nowrap
              ${y===r.id?"bg-emerald-600 text-white shadow-lg shadow-emerald-900/20":"text-gray-400 hover:text-white hover:bg-white/5"}
            `,children:[e.jsx(r.icon,{size:18}),r.label]},r.id))}),$&&e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${$.type==="success"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[$.type==="success"?e.jsx(ie,{size:20}):e.jsx(de,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:$.text})]}),e.jsxs("div",{className:"relative",children:[y==="datos"&&e.jsxs("div",{className:"bg-gray-900/40 border border-gray-800 rounded-2xl p-6 md:p-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"p-3 rounded-full bg-emerald-500/10 text-emerald-400",children:e.jsx(L,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Información de Perfil"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Actualiza tus datos personales y de contacto"})]})]}),e.jsxs("form",{onSubmit:Y,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(L,{size:14})," Usuario"]}),e.jsx("input",{name:"username",value:i.username,disabled:!0,className:"w-full px-4 py-3 rounded-xl bg-gray-800/50 text-gray-500 border border-gray-800 cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(W,{size:14})," Correo Electrónico"]}),e.jsx("input",{name:"email",value:i.email,onChange:j,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all placeholder-gray-600",placeholder:"ejemplo@correo.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Nombre"}),e.jsx("input",{name:"first_name",value:i.first_name,onChange:j,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all placeholder-gray-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Apellido"}),e.jsx("input",{name:"last_name",value:i.last_name,onChange:j,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all placeholder-gray-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(G,{size:14})," Teléfono"]}),e.jsx("input",{name:"phone",value:i.phone||"",onChange:j,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all placeholder-gray-600",placeholder:"+57 300 000 0000"})]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-800 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(O,{size:14})," Departamento"]}),e.jsx("input",{name:"department",value:i.department||"",onChange:j,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all placeholder-gray-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(le,{size:14})," Cargo"]}),e.jsx("input",{name:"position",value:i.position||"",onChange:j,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all placeholder-gray-600"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{type:"submit",disabled:b,className:"flex items-center gap-2 px-8 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-500 text-white font-medium shadow-lg shadow-emerald-900/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(I,{size:18}),b?"Guardando...":"Guardar Cambios"]})})]})]}),y==="empresa"&&e.jsxs("div",{className:"bg-gray-900/40 border border-gray-800 rounded-2xl p-6 md:p-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"p-3 rounded-full bg-blue-500/10 text-blue-400",children:e.jsx(O,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Identidad Corporativa"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Personaliza la información pública de tu negocio"})]})]}),e.jsxs("form",{onSubmit:H,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Nombre de la Empresa"}),e.jsx("input",{name:"company_name",value:s.company_name,onChange:d,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-gray-600",placeholder:"Mi Empresa S.A.S"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"NIT / Identificación"}),e.jsx("input",{name:"company_nit",value:s.company_nit,onChange:d,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-gray-600",placeholder:"900.000.000-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(G,{size:14})," Teléfono"]}),e.jsx("input",{name:"company_phone",value:s.company_phone,onChange:d,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-gray-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(ce,{size:14})," WhatsApp"]}),e.jsx("input",{name:"company_whatsapp",value:s.company_whatsapp,onChange:d,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-gray-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(W,{size:14})," Correo Corporativo"]}),e.jsx("input",{type:"email",name:"company_email",value:s.company_email,onChange:d,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-gray-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(me,{size:14})," Dirección Principal"]}),e.jsx("input",{name:"company_address",value:s.company_address,onChange:d,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-gray-600"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Descripción del Negocio"}),e.jsx("textarea",{name:"company_description",value:s.company_description,onChange:d,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-gray-600 min-h-[100px] resize-none",placeholder:"Una breve descripción que aparecerá en tu perfil público..."})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-800",children:[e.jsxs("h4",{className:"text-white font-medium mb-4 flex items-center gap-2",children:[e.jsx(pe,{size:18,className:"text-blue-400"})," Branding y Marca"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Colores de Marca"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Primario"}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gray-800 border border-gray-700",children:[e.jsx("input",{type:"color",name:"primary_color",value:s.primary_color,onChange:d,className:"w-8 h-8 rounded cursor-pointer border-none p-0 bg-transparent"}),e.jsx("span",{className:"text-sm text-gray-300 font-mono",children:s.primary_color})]})]}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Secundario"}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-gray-800 border border-gray-700",children:[e.jsx("input",{type:"color",name:"secondary_color",value:s.secondary_color,onChange:d,className:"w-8 h-8 rounded cursor-pointer border-none p-0 bg-transparent"}),e.jsx("span",{className:"text-sm text-gray-300 font-mono",children:s.secondary_color})]})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(V,{size:14})," Logo"]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-xl overflow-hidden bg-gray-800 border border-gray-700 flex items-center justify-center shrink-0",children:S?e.jsx("img",{src:URL.createObjectURL(S),alt:"Preview",className:"w-full h-full object-contain"}):s.logo?e.jsx("img",{src:K(s.logo),alt:"Logo",className:"w-full h-full object-contain"}):e.jsx(V,{className:"text-gray-600",size:32})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Z,className:"w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 cursor-pointer"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Recomendado: PNG con fondo transparente, mín. 200x200px."})]})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{type:"submit",disabled:b,className:"flex items-center gap-2 px-8 py-3 rounded-xl bg-blue-600 hover:bg-blue-500 text-white font-medium shadow-lg shadow-blue-900/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(I,{size:18}),b?"Guardando...":"Actualizar Empresa"]})})]})]}),y==="impresora"&&e.jsxs("div",{className:"bg-gray-900/40 border border-gray-800 rounded-2xl p-6 md:p-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"p-3 rounded-full bg-purple-500/10 text-purple-400",children:e.jsx(J,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Configuración de Impresión"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Personaliza el formato de tus recibos y facturas POS"})]})]}),e.jsxs("form",{onSubmit:H,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Tipo de Impresión"}),e.jsxs("select",{name:"printer_type",value:s.printer_type||"system",onChange:d,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 outline-none transition-all",children:[e.jsx("option",{value:"system",children:"Impresora del Sistema (Predeterminada)"}),e.jsx("option",{value:"pos",children:"Impresora POS Directa"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Nombre del Dispositivo"}),e.jsx("input",{name:"printer_name",value:s.printer_name||"",onChange:d,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 outline-none transition-all placeholder-gray-600",placeholder:"Ej: EPSON TM-T20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Ancho del Papel (mm)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"paper_width_mm",value:s.paper_width_mm||58,onChange:d,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 outline-none transition-all placeholder-gray-600"}),e.jsx("span",{className:"absolute right-4 top-3 text-gray-500 text-sm",children:"mm"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-6",children:[e.jsx("input",{type:"checkbox",id:"auto_print",name:"auto_print",checked:!!s.auto_print,onChange:r=>_(a=>({...a,auto_print:r.target.checked})),className:"w-5 h-5 rounded border-gray-600 text-purple-600 focus:ring-purple-500 bg-gray-800"}),e.jsx("label",{htmlFor:"auto_print",className:"text-sm text-gray-300 cursor-pointer",children:"Imprimir automáticamente al registrar venta"})]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-800",children:[e.jsxs("h4",{className:"text-white font-medium mb-6 flex items-center gap-2",children:[e.jsx(ge,{size:18,className:"text-purple-400"})," Diseño del Recibo"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"md:col-span-2 flex items-center gap-3 p-4 bg-gray-800/50 rounded-xl border border-gray-700",children:[e.jsx("input",{type:"checkbox",id:"show_logo",checked:!!t.show_logo,onChange:r=>m(a=>({...a,show_logo:r.target.checked})),className:"w-5 h-5 rounded border-gray-600 text-purple-600 focus:ring-purple-500 bg-gray-800"}),e.jsx("label",{htmlFor:"show_logo",className:"text-sm font-medium text-white cursor-pointer flex-1",children:"Incluir Logo en el Encabezado"})]}),t.show_logo&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Fuente del Logo"}),e.jsxs("select",{value:t.logo_mode,onChange:r=>m(a=>({...a,logo_mode:r.target.value})),className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-purple-500 outline-none",children:[e.jsx("option",{value:"company",children:"Usar Logo de la Empresa"}),e.jsx("option",{value:"custom",children:"URL Personalizada"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Ancho del Logo (mm)"}),e.jsx("input",{type:"number",value:t.logo_width_mm,onChange:r=>m(a=>({...a,logo_width_mm:Number(r.target.value||45)})),className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-purple-500 outline-none"})]}),t.logo_mode==="custom"&&e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"URL de la Imagen"}),e.jsx("input",{value:t.logo_url,onChange:r=>m(a=>({...a,logo_url:r.target.value})),className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-purple-500 outline-none",placeholder:"https://ejemplo.com/logo-ticket.png"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Encabezado Línea 1"}),e.jsx("input",{value:t.header1,onChange:r=>m(a=>({...a,header1:r.target.value})),className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-purple-500 outline-none",placeholder:"Ej: Régimen Común"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Encabezado Línea 2"}),e.jsx("input",{value:t.header2,onChange:r=>m(a=>({...a,header2:r.target.value})),className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-purple-500 outline-none",placeholder:"Ej: Resolución DIAN No..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Alineación de Texto"}),e.jsx("div",{className:"flex bg-gray-800 rounded-xl p-1 border border-gray-700",children:[{val:"left",icon:e.jsx(Q,{size:16})},{val:"center",icon:e.jsx(ue,{size:16})},{val:"right",icon:e.jsx(Q,{size:16})}].map((r,a)=>e.jsx("button",{type:"button",onClick:()=>m(n=>({...n,align:r.val})),className:`flex-1 flex justify-center items-center py-2 rounded-lg transition-all ${t.align===r.val?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:r.icon},r.val))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Tamaño Fuente (px)"}),e.jsx("input",{type:"number",value:t.font_size,onChange:r=>m(a=>({...a,font_size:Number(r.target.value||11)})),className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-purple-500 outline-none"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Pie de Página"}),e.jsx("textarea",{name:"receipt_footer",value:s.receipt_footer||"",onChange:d,className:"w-full px-4 py-3 rounded-xl bg-gray-800 text-white border border-gray-700 focus:border-purple-500 outline-none min-h-[80px] resize-none",placeholder:"Gracias por su compra. Vuelva pronto."})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center gap-3 pt-2",children:[e.jsx("input",{type:"checkbox",id:"show_qr",checked:!!t.show_qr,onChange:r=>m(a=>({...a,show_qr:r.target.checked})),className:"w-5 h-5 rounded border-gray-600 text-purple-600 focus:ring-purple-500 bg-gray-800"}),e.jsxs("label",{htmlFor:"show_qr",className:"text-sm text-gray-300 cursor-pointer flex items-center gap-2",children:[e.jsx(ye,{size:16})," Incluir Código QR al final"]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 pt-4 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:B,className:"px-6 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-white font-medium border border-gray-700 transition-colors w-full md:w-auto",children:"Vista Previa (Ticket)"}),e.jsxs("button",{type:"submit",disabled:b,className:"flex items-center justify-center gap-2 px-8 py-3 rounded-xl bg-purple-600 hover:bg-purple-500 text-white font-medium shadow-lg shadow-purple-900/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed w-full md:w-auto",children:[e.jsx(I,{size:18}),b?"Guardando...":"Guardar Configuración"]})]})]})]})]}),R&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 bg-gray-100 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"Vista Previa de Configuración"}),e.jsx("button",{onClick:()=>M(null),className:"text-gray-500 hover:text-gray-800",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-hidden bg-gray-200 flex justify-center p-4",children:e.jsx("div",{className:"shadow-lg bg-white overflow-hidden",style:{width:`${s.paper_width_mm||58}mm`,maxHeight:"100%",overflowY:"auto"},children:e.jsx("iframe",{srcDoc:R,className:"w-full h-full border-none bg-white",title:"Config Preview",style:{minHeight:"400px"}})})}),e.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:e.jsx("button",{onClick:()=>M(null),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"Cerrar"})})]})})]})};export{Me as default};
