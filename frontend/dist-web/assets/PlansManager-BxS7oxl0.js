import{r as l,j as e,A as E}from"./index-DLBiUv4k.js";import"./vendor-BtP0CW_r.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,c,o)=>o?o.toUpperCase():c.toLowerCase()),k=t=>{const r=$(t);return r.charAt(0).toUpperCase()+r.slice(1)},C=(...t)=>t.filter((r,c,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===c).join(" ").trim();/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var M={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=l.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:o,className:h="",children:u,iconNode:b,...w},N)=>l.createElement("svg",{ref:N,...M,width:r,height:r,stroke:t,strokeWidth:o?Number(c)*24/Number(r):c,className:C("lucide",h),...w},[...b.map(([v,y])=>l.createElement(v,y)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=(t,r)=>{const c=l.forwardRef(({className:o,...h},u)=>l.createElement(I,{ref:u,iconNode:r,className:C(`lucide-${S(k(t))}`,`lucide-${t}`,o),...h}));return c.displayName=k(t),c};/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],x=f("check",H);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],U=f("save",T);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],D=f("square-pen",B);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],d=f("x",F),O=({token:t})=>{const[r,c]=l.useState([]),[o,h]=l.useState([]),[u,b]=l.useState(!0),[w,N]=l.useState(null),[v,y]=l.useState(!1),[a,p]=l.useState(null),j=E,A=s=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(Number(s)),_=async()=>{b(!0);try{const s={"Content-Type":"application/json",Authorization:`Bearer ${t}`},[i,m]=await Promise.all([fetch(`${j}/users/api/subscriptions/plans/`,{headers:s}),fetch(`${j}/users/api/subscriptions/tenants/`,{headers:s})]);if(i.ok){const g=await i.json();c(Array.isArray(g)?g:g.results||[])}if(m.ok){const g=await m.json();h(Array.isArray(g)?g:g.results||[])}}catch{N("Error cargando datos")}finally{b(!1)}};l.useEffect(()=>{_()},[t]);const z=async(s,i)=>{if(confirm("¿Estás seguro de asignar este plan?")){y(!0);try{const m={"Content-Type":"application/json",Authorization:`Bearer ${t}`};(await fetch(`${j}/users/api/subscriptions/plans/${i}/assign/`,{method:"POST",headers:m,body:JSON.stringify({user_id:s})})).ok?await _():alert("Error asignando plan")}catch{alert("Error de conexión")}finally{y(!1)}}},P=async s=>{if(s.preventDefault(),!!a)try{const i={"Content-Type":"application/json",Authorization:`Bearer ${t}`};(await fetch(`${j}/users/api/subscriptions/plans/${a.id}/`,{method:"PATCH",headers:i,body:JSON.stringify(a)})).ok?(p(null),await _()):alert("Error actualizando el plan")}catch{alert("Error de conexión")}},n=(s,i)=>{p(m=>m?{...m,[s]:i}:null)};return u?e.jsx("div",{className:"p-8 text-center text-white",children:"Cargando planes..."}):e.jsxs("div",{className:"space-y-8 p-6 relative",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Planes de Suscripción"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.map(s=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700 flex flex-col relative group",children:[e.jsx("button",{onClick:()=>p(s),className:"absolute top-4 right-4 p-2 bg-gray-700 rounded-full hover:bg-gray-600 text-gray-300 hover:text-white transition opacity-0 group-hover:opacity-100",title:"Editar Plan",children:e.jsx(D,{size:16})}),e.jsx("div",{className:"flex justify-between items-start mb-4 pr-10",children:e.jsx("h3",{className:"text-xl font-bold text-white",children:s.name})}),e.jsx("span",{className:"text-3xl font-bold text-green-400 mb-2",children:A(s.price)}),e.jsx("p",{className:"text-gray-400 mb-6 flex-1 text-sm",children:s.description}),e.jsxs("div",{className:"space-y-3 mb-6 text-sm text-gray-300 border-t border-gray-700 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Usuarios:"}),e.jsx("span",{children:s.max_users===-1?"Ilimitados":s.max_users})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Productos:"}),e.jsx("span",{children:s.max_products===-1?"Ilimitados":s.max_products})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Categorías:"}),e.jsx("span",{children:s.max_categories===-1?"Ilimitadas":s.max_categories})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Transacciones:"}),e.jsxs("span",{children:[s.max_transactions_per_month===-1?"Ilimitadas":s.max_transactions_per_month,"/mes"]})]}),e.jsxs("div",{className:"pt-4 space-y-2",children:[s.enable_user_management?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(x,{size:16})," Gestión de Usuarios"]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(d,{size:16})," Gestión de Usuarios"]}),s.enable_web_store?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(x,{size:16})," Tienda Virtual"]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(d,{size:16})," Tienda Virtual"]}),s.enable_inventory_management?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(x,{size:16})," Inventario Avanzado"]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(d,{size:16})," Inventario Avanzado"]}),s.enable_marketing_tools?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(x,{size:16})," Marketing"]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(d,{size:16})," Marketing"]}),s.enable_advanced_sales_analysis?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(x,{size:16})," Análisis Avanzado"]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(d,{size:16})," Análisis Avanzado"]}),s.enable_supplier_management?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(x,{size:16})," Gestión de Proveedores"]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(d,{size:16})," Gestión de Proveedores"]}),s.enable_daily_backups?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(x,{size:16})," Copias de Seguridad"]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(d,{size:16})," Copias de Seguridad"]}),s.enable_whatsapp_notifications?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(x,{size:16})," Notif. WhatsApp"]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(d,{size:16})," Notif. WhatsApp"]}),s.enable_electronic_invoicing?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(x,{size:16})," Facturación Electrónica"]}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(d,{size:16})," Facturación Electrónica"]})]})]})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Asignación de Planes"}),e.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700",children:e.jsxs("table",{className:"w-full text-left text-gray-300",children:[e.jsx("thead",{className:"bg-gray-900 text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Administrador"}),e.jsx("th",{className:"p-4",children:"Email"}),e.jsx("th",{className:"p-4",children:"Estadísticas"}),e.jsx("th",{className:"p-4",children:"Plan Actual"}),e.jsx("th",{className:"p-4",children:"Acciones"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-700",children:[o.map(s=>e.jsxs("tr",{className:"hover:bg-gray-750",children:[e.jsx("td",{className:"p-4 font-medium text-white",children:s.username}),e.jsx("td",{className:"p-4",children:s.email}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col space-y-1 text-xs text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-medium",children:s.clients_count||0})," Clientes"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-medium",children:s.sales_count||0})," Ventas"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-medium",children:s.products_count||0})," Productos"]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${s.plan_name?s.plan_name.includes("Básico")?"bg-blue-900 text-blue-300":s.plan_name.includes("Medio")?"bg-purple-900 text-purple-300":"bg-green-900 text-green-300":"bg-gray-700 text-gray-400"}`,children:s.plan_name||"Sin Plan"})}),e.jsx("td",{className:"p-4",children:e.jsxs("select",{className:"bg-gray-700 border-none rounded text-sm text-white focus:ring-2 focus:ring-blue-500",value:s.plan_id||"",onChange:i=>z(s.admin_id,i.target.value),disabled:v,children:[e.jsx("option",{value:"",children:"Seleccionar plan..."}),r.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})})]},s.id)),o.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"No hay administradores registrados"})})]})]})})]}),a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 shadow-2xl w-full max-w-lg overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-700 flex justify-between items-center bg-gray-900",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:["Editar ",a.name]}),e.jsx("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-white",children:e.jsx(d,{size:24})})]}),e.jsxs("form",{onSubmit:P,className:"p-6 space-y-4 max-h-[80vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:a.name,onChange:s=>n("name",s.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Precio ($)"}),e.jsx("input",{type:"number",step:"0.01",value:a.price,onChange:s=>n("price",s.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Descripción"}),e.jsx("textarea",{value:a.description,onChange:s=>n("description",s.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 outline-none h-20 resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Máx. Usuarios (-1 ilim.)"}),e.jsx("input",{type:"number",value:a.max_users,onChange:s=>n("max_users",parseInt(s.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Máx. Transacciones (-1 ilim.)"}),e.jsx("input",{type:"number",value:a.max_transactions_per_month,onChange:s=>n("max_transactions_per_month",parseInt(s.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Máx. Productos (-1 ilim.)"}),e.jsx("input",{type:"number",value:a.max_products,onChange:s=>n("max_products",parseInt(s.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Máx. Categorías (-1 ilim.)"}),e.jsx("input",{type:"number",value:a.max_categories,onChange:s=>n("max_categories",parseInt(s.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-700",children:[e.jsx("h4",{className:"font-medium text-white",children:"Funcionalidades"}),e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enable_user_management,onChange:s=>n("enable_user_management",s.target.checked),className:"w-4 h-4 rounded border-gray-600 text-blue-600 focus:ring-blue-500 bg-gray-700"}),e.jsx("span",{className:"text-gray-300",children:"Habilitar Gestión de Usuarios"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enable_web_store,onChange:s=>n("enable_web_store",s.target.checked),className:"w-4 h-4 rounded border-gray-600 text-blue-600 focus:ring-blue-500 bg-gray-700"}),e.jsx("span",{className:"text-gray-300",children:"Habilitar Tienda Virtual"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enable_inventory_management,onChange:s=>n("enable_inventory_management",s.target.checked),className:"w-4 h-4 rounded border-gray-600 text-blue-600 focus:ring-blue-500 bg-gray-700"}),e.jsx("span",{className:"text-gray-300",children:"Habilitar Inventario Avanzado"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enable_marketing_tools,onChange:s=>n("enable_marketing_tools",s.target.checked),className:"w-4 h-4 rounded border-gray-600 text-blue-600 focus:ring-blue-500 bg-gray-700"}),e.jsx("span",{className:"text-gray-300",children:"Habilitar Herramientas de Marketing"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enable_advanced_sales_analysis,onChange:s=>n("enable_advanced_sales_analysis",s.target.checked),className:"w-4 h-4 rounded border-gray-600 text-blue-600 focus:ring-blue-500 bg-gray-700"}),e.jsx("span",{className:"text-gray-300",children:"Habilitar Análisis Avanzado"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enable_supplier_management,onChange:s=>n("enable_supplier_management",s.target.checked),className:"w-4 h-4 rounded border-gray-600 text-blue-600 focus:ring-blue-500 bg-gray-700"}),e.jsx("span",{className:"text-gray-300",children:"Habilitar Gestión de Proveedores"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enable_daily_backups,onChange:s=>n("enable_daily_backups",s.target.checked),className:"w-4 h-4 rounded border-gray-600 text-blue-600 focus:ring-blue-500 bg-gray-700"}),e.jsx("span",{className:"text-gray-300",children:"Habilitar Copias de Seguridad"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enable_whatsapp_notifications,onChange:s=>n("enable_whatsapp_notifications",s.target.checked),className:"w-4 h-4 rounded border-gray-600 text-blue-600 focus:ring-blue-500 bg-gray-700"}),e.jsx("span",{className:"text-gray-300",children:"Habilitar Notificaciones WhatsApp"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enable_electronic_invoicing,onChange:s=>n("enable_electronic_invoicing",s.target.checked),className:"w-4 h-4 rounded border-gray-600 text-blue-600 focus:ring-blue-500 bg-gray-700"}),e.jsx("span",{className:"text-gray-300",children:"Habilitar Facturación Electrónica"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>p(null),className:"px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 text-white font-medium",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white font-medium flex items-center gap-2",children:[e.jsx(U,{size:18})," Guardar Cambios"]})]})]})]})})]})};export{O as default};
